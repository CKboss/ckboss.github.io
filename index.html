<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="zh-cn">
  
  <title>码代码的猿猿</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="码代码的猿猿">
<meta property="og:url" content="http://www.ckboss.cf/index.html">
<meta property="og:site_name" content="码代码的猿猿">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="码代码的猿猿">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="码代码的猿猿" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">码代码的猿猿</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">码代码的猿猿的ac之路</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/About-Me">About Me</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form class="search-form">
          <input type="text" id="ts-search-input"  name="word" maxlength="20"  class="search-form-input" placeholder="搜索">
        </form>
      </div>
    </div>
  </div>

</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-HDOJ5858" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/08/21/HDOJ5858/" class="article-date">
  <time datetime="2016-08-21T13:33:03.000Z" itemprop="datePublished">2016-08-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/acm-math/">acm_math</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/08/21/HDOJ5858/">HDOJ 5858 Hard problem 积分</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>博客恢复更新了,顺便看了下今年多校的题目…</p>
<h1 id="Hard_problem"><a href="http://acm.split.hdu.edu.cn/showproblem.php?pid=5858">Hard problem</a></h1><h4 id="Problem_Description">Problem Description</h4><p>cjj is fun with math problem. One day he found a Olympic Mathematics problem for primary school students. It is too difficult for cjj. Can you solve it?</p>
<p><img src="http://acm.split.hdu.edu.cn/data/images/C713-1002-1.jpg" alt=""></p>
<p>Give you the side length of the square L, you need to calculate the shaded area in the picture.</p>
<p>The full circle is the inscribed circle of the square, and the center of two quarter circle is the vertex of square, and its radius is the length of the square.</p>
<h4 id="Input">Input</h4><p>The first line contains a integer T(1&lt;=T&lt;=10000), means the number of the test case. Each case contains one line with integer l(1&lt;=l&lt;=10000).</p>
<h4 id="Output">Output</h4><p>For each test case, print one line, the shade area in the picture. The answer is round to two digit.</p>
<h4 id="Sample_Input">Sample Input</h4><p>1<br>1</p>
<h4 id="Sample_Output">Sample Output</h4><p>0.29</p>
<h4 id="Author">Author</h4><p>BUPT</p>
<h4 id="Source">Source</h4><p>2016 Multi-University Training Contest 10</p>
<p>如何计算阴影部分的面积还是很显然的.把原图分成两半,只看一边的话,先计算出小圆和大圆的交点,然后用积分分两段算出交点下方的面积就可以了.<br>主要是半圆的定积分的计算比较麻烦,求出的式子比较长…</p>
<p>$\frac{x \left(L^2-3 L x+2 L \sqrt{x (L-x)}+2 x^2\right)-L^2 \sqrt{x} \sqrt{L-x} \tan ^{-1}\left(\frac{\sqrt{x}}{\sqrt{L-x}}\right)}{4 \sqrt{x (L-x)}}$</p>
<p>$\frac{2 L^2 \sqrt{x} \sqrt{2 L-x} \tan ^{-1}\left(\frac{\sqrt{x}}{\sqrt{2 L-x}}\right)-x \left(2 L^2-3 L x+x^2\right)}{2 \sqrt{x (2 L-x)}}$</p>
        
          <p class="article-more-link">
            <a href="/2016/08/21/HDOJ5858/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/08/21/HDOJ5858/" data-id="cis4nyv1s004hpwqfvroxbosa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HDOJ/">HDOJ</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/math/">math</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Tornado的部署" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/30/Tornado的部署/" class="article-date">
  <time datetime="2016-05-30T07:49:10.000Z" itemprop="datePublished">2016-05-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/30/Tornado的部署/">服务器上Tornado的运行和部署</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>虽然tornado本身运行不需要服务器,但是真正部署的时候还是需要用一些设置才好保证稳定性.</p>
<h2 id="使用Nginx来负载均衡">使用Nginx来负载均衡</h2><p>可以同时开多个tornado进程,用Nginx来进行负载的均衡.</p>
<p>首先安装 Nginx<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install nginx</span><br></pre></td></tr></table></figure></p>
<p>然后修改nignx的配置文件,/etc/nginx/nginx.conf<br>比如我要看4个进程8000~8003,现在都通过80进行跳转:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#user nginx;</span></span><br><span class="line">worker_processes <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">error_<span class="built_in">log</span> /var/<span class="built_in">log</span>/nginx/error.log;</span><br><span class="line">pid /var/run/nginx.pid;</span><br><span class="line"></span><br><span class="line">events &#123;</span><br><span class="line">    worker_connections <span class="number">1024</span>;</span><br><span class="line">    use epoll;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">http &#123;</span><br><span class="line">    <span class="comment"># Enumerate all the Tornado servers here</span></span><br><span class="line">    upstream mysite.com &#123;</span><br><span class="line">        server <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8000</span>;</span><br><span class="line">        server <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8001</span>;</span><br><span class="line">        server <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8002</span>;</span><br><span class="line">        server <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">8003</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">#include /usr/local/nginx/conf/mime.types;</span></span><br><span class="line">    default_<span class="built_in">type</span> application/octet-stream;</span><br><span class="line"></span><br><span class="line">    access_<span class="built_in">log</span> /var/<span class="built_in">log</span>/nginx/access.log;</span><br><span class="line"></span><br><span class="line">    keepalive_timeout <span class="number">65</span>;</span><br><span class="line">    proxy_<span class="built_in">read</span>_timeout <span class="number">200</span>;</span><br><span class="line">    sendfile on;</span><br><span class="line">    tcp_nopush on;</span><br><span class="line">    tcp_nodelay on;</span><br><span class="line">    gzip on;</span><br><span class="line">    gzip_min_length <span class="number">1000</span>;</span><br><span class="line">    gzip_proxied any;</span><br><span class="line">    gzip_types text/plain text/css text/xml</span><br><span class="line">               application/x-javascript application/xml</span><br><span class="line">               application/atom+xml text/javascript;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># Only retry if there was a communication error, not a timeout</span></span><br><span class="line">    <span class="comment"># on the Tornado server (to avoid propagating "queries of death"</span></span><br><span class="line">    <span class="comment"># to all frontends)</span></span><br><span class="line">    proxy_next_upstream error;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen <span class="number">80</span>;</span><br><span class="line">	    <span class="comment">#your ip address</span></span><br><span class="line">        server_name <span class="number">172.16</span>.<span class="number">83.129</span>;</span><br><span class="line">        <span class="comment"># Allow file uploads</span></span><br><span class="line">        client_max_body_size <span class="number">50</span>M;</span><br><span class="line"></span><br><span class="line">        location static/ &#123;</span><br><span class="line">            root /srv/www/mysite.com/MySite/;</span><br><span class="line">            <span class="keyword">if</span> (<span class="variable">$query_string</span>) &#123;</span><br><span class="line">                expires max;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        location = /favicon.ico &#123;</span><br><span class="line">            rewrite (.*) /static/favicon.ico;</span><br><span class="line">        &#125;</span><br><span class="line">        location = /robots.txt &#123;</span><br><span class="line">            rewrite (.*) /static/robots.txt;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            proxy_pass_header Server;</span><br><span class="line">            proxy_<span class="built_in">set</span>_header Host <span class="variable">$http_host</span>;</span><br><span class="line">            proxy_redirect off;</span><br><span class="line">            proxy_<span class="built_in">set</span>_header X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">            proxy_<span class="built_in">set</span>_header X-Scheme <span class="variable">$scheme</span>;</span><br><span class="line">            proxy_pass http://mysite.com;</span><br><span class="line">	    proxy_<span class="built_in">set</span>_header REMOTE_ADD <span class="variable">$remote_addr</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>重启nginx服务就可以了,出了问题可以去看/var/log/nginx/error.log<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo service nginx restart</span><br></pre></td></tr></table></figure></p>
<h2 id="使用Supervisor来管理tornado">使用Supervisor来管理tornado</h2><p>使用Supervisor可以自动监视tornado进程,在其死掉的时候自动重启.</p>
<p>安装Supervisor<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3 install supervisor</span><br></pre></td></tr></table></figure></p>
<p>生成配置文件:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo <span class="built_in">echo</span>_supervisord_conf &gt; /etc/supervisord.conf</span><br></pre></td></tr></table></figure></p>
<p>在生成的配置文件中最后加入Torando的进程的启动方式,类似这样.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[program:exe1_8000]</span><br><span class="line"><span class="built_in">command</span>=python3 /home/ckboss/Web/demo.py -port=<span class="number">8000</span></span><br><span class="line">autostart=<span class="literal">true</span></span><br><span class="line">autorestart=<span class="literal">true</span></span><br><span class="line">redirect_stderr=<span class="literal">true</span></span><br><span class="line">stdout_logfile=logfile</span><br></pre></td></tr></table></figure>
<p>然后重启supervisord,最好指明配置文件在哪</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo supervisord -c /etc/supervisord.conf</span><br></pre></td></tr></table></figure>
<p>其他的重启办法</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo service supervisor start</span><br><span class="line">sudo supervisorctl restart all</span><br></pre></td></tr></table></figure>
<p>然后就可以了.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/05/30/Tornado的部署/" data-id="cis4nyv0z003hpwqfoib1pmr2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tornado/">tornado</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-antergos使用小记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/05/12/antergos使用小记/" class="article-date">
  <time datetime="2016-05-12T04:53:45.000Z" itemprop="datePublished">2016-05-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/arch/">arch</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/05/12/antergos使用小记/">antergos使用小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><img src="https://antergos.com/wp-content/uploads/2014/09/antergos-clean.png" alt="antergos"></p>
<p>antergos是arch的衍伸版，用的是arch+antergos的源。即可以方便的安装又可以使用arch的滚动更新和<br>强大包管理功能。</p>
<p>一些安装和配置的时候遇到的问题。</p>
<h2 id="fcitx-sogoupinyin_输入法的安装">fcitx-sogoupinyin 输入法的安装</h2><p>在aur里有打包好的搜狗拼音，不过安装好之后并不能切换出来，最后执行这两句就好了。。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S fcitx-im</span><br><span class="line">sudo pacman -S fcitx-configtool</span><br></pre></td></tr></table></figure>
<h2 id="VMware的安装">VMware的安装</h2><p>arch的安装方式有点不太一样，安装的时候忽略没有/etc/init.d的错误，然后执行以下两句就可以了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo pacman -S linux-headers </span><br><span class="line">sudo pacman -S base-devel</span><br></pre></td></tr></table></figure>
<h2 id="中文字体的设置">中文字体的设置</h2><p>安装 <code>yaourt -S fontconfig-infinality</code>后中文字体的显示会好很多.<br>m1+ mn 是一个非常好用的，中英文共存的等宽字体。</p>
<p><del>最后先试用一阵，看看会不会滚挂掉再说</del></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/05/12/antergos使用小记/" data-id="cis4nyv04002cpwqfkqn28f5y" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/arch/">arch</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java生产者和消费者" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/23/Java生产者和消费者/" class="article-date">
  <time datetime="2016-04-23T15:53:23.000Z" itemprop="datePublished">2016-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/23/Java生产者和消费者/">简单的Java生产者和消费者</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>生产者和消费者是经典的一种模型</p>
<p>用Blockqueue，可以轻松实现这种多线程模型.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis.clients.jedis.Jedis;</span><br><span class="line"><span class="keyword">import</span> tools.JEdisSetting;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.BlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.CountDownLatch;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.LinkedBlockingQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.SynchronousQueue;</span><br><span class="line"><span class="keyword">import</span> java.util.concurrent.atomic.AtomicInteger;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by ckboss on 16-4-16.</span><br><span class="line"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Producer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BlockingQueue queue;</span><br><span class="line">    <span class="keyword">private</span> File dir;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    Producer(<span class="keyword">int</span> _id,CountDownLatch contdown,String filepath , BlockingQueue queue) &#123;</span><br><span class="line">        <span class="keyword">this</span>.queue = queue;</span><br><span class="line">        dir = <span class="keyword">new</span> File(filepath);</span><br><span class="line">        id = _id;</span><br><span class="line">        countDownLatch = contdown;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            File[] files = dir.listFiles();</span><br><span class="line">            <span class="keyword">for</span>(File file : files) &#123;</span><br><span class="line">                Report report = <span class="keyword">new</span> Report(file.getAbsolutePath());</span><br><span class="line">                queue.add(report);</span><br><span class="line">            &#125;</span><br><span class="line">            countDownLatch.countDown();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Consumer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> CountDownLatch countDownLatch;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> BlockingQueue queue;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> Jedis jedis;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Field[] fields = Report.class.getDeclaredFields();</span><br><span class="line"></span><br><span class="line">    Consumer(<span class="keyword">int</span> _id,CountDownLatch contdown,BlockingQueue queue) &#123;</span><br><span class="line">        <span class="keyword">this</span>.queue = queue;</span><br><span class="line">        jedis = JEdisSetting.jedisPool.getResource();</span><br><span class="line">        id=_id;</span><br><span class="line">        countDownLatch = contdown;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">while</span> (!queue.isEmpty()) &#123;</span><br><span class="line">                Report report = (Report) queue.take();</span><br><span class="line">                GaoIt(report);</span><br><span class="line">            &#125;</span><br><span class="line">            countDownLatch.countDown();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">GaoIt</span><span class="params">(Report report)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Docu doc = <span class="keyword">new</span> Docu(report);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MulitPretreatment</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> AtomicInteger cnt = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Jedis jedis;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Field[] fields = Report.class.getDeclaredFields();</span><br><span class="line"></span><br><span class="line">    MulitPretreatment() &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        <span class="keyword">long</span> end = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> N = <span class="number">30</span>;</span><br><span class="line">        BlockingQueue blockingQueue = <span class="keyword">new</span> LinkedBlockingQueue&lt;&gt;();</span><br><span class="line">        CountDownLatch doneSignal = <span class="keyword">new</span> CountDownLatch(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        String filepath = <span class="string">"/home/ckboss/Documents/MachineLearning/数据集/搜索数据/trec_data1_renameCheckSum"</span>;</span><br><span class="line">        <span class="comment">//String filepath = "/home/ckboss/Documents/MachineLearning/数据集/搜索数据/101";</span></span><br><span class="line">        Producer producer0 = <span class="keyword">new</span> Producer(<span class="number">0</span>,doneSignal,filepath,blockingQueue);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">new</span> Thread(producer0).start();</span><br><span class="line">        <span class="comment">//new Thread(producer1).start();</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            doneSignal.await();</span><br><span class="line">            System.out.println(<span class="string">"queue size: "</span>+blockingQueue.size());</span><br><span class="line">            doneSignal = <span class="keyword">new</span> CountDownLatch(N);</span><br><span class="line">            <span class="keyword">int</span> size = blockingQueue.size();</span><br><span class="line">            jedis.set(<span class="string">"docnum"</span>,String.valueOf(size));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        ArrayList&lt;Consumer&gt; ac = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</span><br><span class="line">            ac.add(<span class="keyword">new</span> Consumer(i,doneSignal,blockingQueue));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;N;i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(ac.get(i)).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            doneSignal.await();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 合并</span></span><br><span class="line">            <span class="comment">// calu avg len</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> MulitPretreatment();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>生产者会吧所有的doc预处理到BlockQueue中，多个消费者会从这个队列中获得doc来进行处理。</p>
<p>可以用一个叫CountDownLatch的计数器来隔离每个过程。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/04/23/Java生产者和消费者/" data-id="cis4nyv1j0044pwqfjcrojcla" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/多线程/">多线程</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu16-04初体验" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/23/ubuntu16-04初体验/" class="article-date">
  <time datetime="2016-04-23T14:32:57.000Z" itemprop="datePublished">2016-04-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Ubuntu/">Ubuntu</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/23/ubuntu16-04初体验/">ubuntu16.04初体验</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>大概两天前，4月21日，第一时间下载了ubuntu16.04。并作死安装升级。</p>
<p>你要是问我体验怎么样，那我只能回答体验是非常的差的。。。</p>
<p>总的来说初体验的感觉就是问题非常的多，根本不像个LTS版的样子，小白鼠fedaro都比现在的ubuntu稳定。。。。</p>
<p>记得14.04刚出来的时候我也是立刻换了新版的，那时候似乎还没有这么多的问题。。。</p>
<p>一些遇到的问题：</p>
<ol>
<li>首先作死用16.04的iso来升级14.04，结果可想而知。ubuntu的升级就从来就不会成功的。我用iso升级了3刚小时，最后爆出的只有一串的error而已</li>
<li>然后清空系统进行重装，安装还是比较顺利的，只是在选择安装第三方包的时候，似乎有个安全启动什么的要输入一下密码（其实是第一个隐藏坑）。。</li>
<li>16.04还是使用的unity7,界面和14.04一样，没有什么改变，令人有些小失望（不过很快就因为未知的原因再也打不开了）</li>
<li>安装了一下nvidia显卡驱动和fcitx框架，准备上搜狗输入法，登陆出去了一下，OK这回循环登陆再也进不去桌面了。不知道是fcitx的问题还是显卡驱动的问题。</li>
<li>安装了xfce的桌面环境，这回可以登陆桌面了，虽然用了附加驱动里推荐的nvidia361,但是驱动并没有装好。</li>
<li>中文字体渲染非常糟糕，默认的字体细的根本没法看。尤其是在goolge浏览器中。最后用了插件把字体强制换成文泉驿的才勉强可以正常显示。</li>
</ol>
<p>16.04自带的包更新了不少，不过很多软件并没有做好兼容工作。</p>
<ol>
<li>装了搜狗的输入法，桌面上同时出现两个。。。（现在用fcitx框架自带的一个输入法，用起来还行）</li>
<li>vmware不能新建虚拟机，因为安装的时候不小心开启了安全boot，需要手动去关闭</li>
<li>ohmyzsh默认配置不能够保留history的记录，这个稍微改动一下就好了</li>
<li>很多软件的中文字体都非常的细</li>
<li>一些命令行工具变了，比如nm-tool没有了，取而代之的是nmcli（这个似乎变了有一阵了）</li>
</ol>
<p>总之，没有特殊需求，不建议在现阶段升级，等着这波bug修完了再升级。。。。</p>
<h5 id="来张screenfetch：">来张screenfetch：</h5><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10140;  screenFetch-master ./screenfetch-dev &#10;                          ./+o+-       ckboss@ckboss-HP&#10;                  yyyyy- -yyyyyy+      OS: ubuntu Ubuntu 16.04 xenial&#10;               ://+//////-yyyyyyo      Kernel: x86_64 Linux 4.4.0-21-generic&#10;           .++ .:/++++++/-.+sss/`      Uptime: 6h 14m&#10;         .:++o:  /++++++++/:--:/-      Packages: 2091&#10;        o:+o+:++.`..```.-/oo+++++/     Shell: zsh 5.1.1&#10;       .:+o:+o/.          `+sssoo+/    Resolution: 1920x1080&#10;  .++/+:+oo+o:`             /sssooo.   DE: XFCE&#10; /+++//+:`oo+o               /::--:.   WM: Xfwm4&#10; \+/+o+++`o++o               ++////.   WM Theme: Numix&#10;  .++.o+++oo+:`             /dddhhh.   GTK Theme: Greybird [GTK2]&#10;       .+.o+oo:.          `oddhhhh+    Icon Theme: elementary-xfce-darker&#10;        \+.++o+o``-````.:ohdhhhhh+     Font: Ubuntu Medium 12&#10;         `:o+++ `ohhhhhhhhyo++os:      CPU: Intel Core i7-6500U CPU @ 3.1GHz&#10;           .o:`.syhhhhhhh/.oo++o`      RAM: 3997MiB / 7822MiB&#10;               /osyyyyyyo++ooo+++/    &#10;                   ````` +oo+++o\:    &#10;                          `oo++.</span><br></pre></td></tr></table></figure>
<p>附Chrome字体特别细的解决办法：</p>
<ol>
<li>安装文泉驿微米黑</li>
<li>在chrome的设置中选择高级设置字体设置，选择使用插件设置默认字体为文泉驿微米黑</li>
</ol>
<p>下载安装一些win10的字体可以改善中文字体的显示。。。。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/04/23/ubuntu16-04初体验/" data-id="cis4nyuzp001mpwqf6ps88ojr" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-ubuntu创建无线热点" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/16/ubuntu创建无线热点/" class="article-date">
  <time datetime="2016-04-16T04:54:27.000Z" itemprop="datePublished">2016-04-16</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Ubuntu相关/">Ubuntu相关</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/16/ubuntu创建无线热点/">ubuntu创建无线热点的神器!!</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>以前用ubuntu共享wifi一直是一个比较麻烦事情….</p>
<p>直到遇到了一个这样的神器:</p>
<h3 id="create_ap"><a href="https://github.com/oblique/create_ap" target="_blank" rel="external">create_ap</a></h3><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create_ap wlan0 eth0 MyAccessPoint MyPassPhrase</span><br></pre></td></tr></table></figure>
<p>一行轻松搞定~~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/04/16/ubuntu创建无线热点/" data-id="cis4nyuzm001fpwqfvzl6tt5k" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/实用工具/">实用工具</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Log4j2入门" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/12/Log4j2入门/" class="article-date">
  <time datetime="2016-04-12T05:45:52.000Z" itemprop="datePublished">2016-04-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Java/">Java</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/12/Log4j2入门/">Log4j2入门</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>总是用printf调试不太方便管理,稍微研究了一下log4j的用法,其实都可以在<a href="https://logging.apache.org/log4j/2.0/faq.html" target="_blank" rel="external">FAQ</a>里找到.</p>
<ul>
<li><p>Log4j2<a href="https://logging.apache.org/log4j/2.x/" target="_blank" rel="external">官网</a></p>
</li>
<li><p>需要两个包: <strong>log4j-api-2.5.jar , log4j-core-2.5.jar</strong></p>
</li>
<li><p>配置文件名是  log4j2.xml</p>
</li>
</ul>
<p>网上找的example文件:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">Configuration</span> <span class="attribute">status</span>=<span class="value">"WARN"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">Appenders</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">Console</span> <span class="attribute">name</span>=<span class="value">"Console"</span> <span class="attribute">target</span>=<span class="value">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">PatternLayout</span> <span class="attribute">pattern</span>=<span class="value">"%d&#123;HH:mm:ss.SSS&#125; %-5level %logger&#123;36&#125; - %msg%n"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">Console</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">Console</span> <span class="attribute">name</span>=<span class="value">"SlowConsole"</span> <span class="attribute">target</span>=<span class="value">"SYSTEM_OUT"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">PatternLayout</span> <span class="attribute">pattern</span>=<span class="value">"%highlight&#123;%d&#123;HH:mm:ss.SSS&#125; %-5level %logger&#123;36&#125;.%M() @%L - %msg%n&#125;&#123;FATAL=red, ERROR=red, WARN=yellow, INFO=black, DEBUG=green, TRACE=blue&#125;"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">Console</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">File</span> <span class="attribute">name</span>=<span class="value">"File"</span> <span class="attribute">fileName</span>=<span class="value">"C:\log\out.txt"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">PatternLayout</span> <span class="attribute">pattern</span>=<span class="value">"%d&#123;HH:mm:ss.SSS&#125; %-5level %logger&#123;36&#125; - %msg%n"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">File</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">Appenders</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="title">Loggers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">logger</span> <span class="attribute">name</span>=<span class="value">"org.abc.ea.web"</span> <span class="attribute">level</span>=<span class="value">"ALL"</span> <span class="attribute">additivity</span>=<span class="value">"false"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--Log4j for the WEB MODULE --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"SlowConsole"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">logger</span> <span class="attribute">name</span>=<span class="value">"org.abc.ea.ejb"</span> <span class="attribute">level</span>=<span class="value">"ALL"</span> <span class="attribute">additivity</span>=<span class="value">"false"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--Log4j for the EJB MODULE --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">appender-ref</span> <span class="attribute">ref</span>=<span class="value">"SlowConsole"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">logger</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="title">Root</span> <span class="attribute">level</span>=<span class="value">"ERROR"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">AppenderRef</span> <span class="attribute">ref</span>=<span class="value">"Console"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="title">AppenderRef</span> <span class="attribute">ref</span>=<span class="value">"File"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="title">Root</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="title">Loggers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">Configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/04/12/Log4j2入门/" data-id="cis4nyv1e003xpwqfvzo0ju0q" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Java/">Java</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Log4j/">Log4j</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-用朴素贝叶斯进行垃圾邮件分类" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/09/用朴素贝叶斯进行垃圾邮件分类/" class="article-date">
  <time datetime="2016-04-08T17:38:59.000Z" itemprop="datePublished">2016-04-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/MachineLearning/">MachineLearning</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/09/用朴素贝叶斯进行垃圾邮件分类/">用朴素贝叶斯进行垃圾邮件分类</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>朴素贝叶斯算法非常简单,但是在实际运用中效果往往还不错…</p>
<p>贝叶斯公式:<br>$P(A,B)=P(A|B)<em>P(B)=P(B|A)</em>P(A)$<br>非常简单的概率公式,但有一个奇妙的用途就是可以让两个条件概率之间互相转换.</p>
<p>举个例子:</p>
<ul>
<li>今天天上有云的概率 $P(A)$</li>
<li>今天天上下雨的概率 $P(B)$</li>
<li>今天从天上有云推出今天天上下雨的条件概率是 $P(B|A)$</li>
</ul>
<p>但这个概率并不太好直接计算,不过我们可以统计出今天天上下雨并且天上有云的概率$P(A|B)$,这样就可以用贝叶斯公式来推出$P(B|A)$了,统计的数据越多,推出来的概率也就越准确.</p>
<p>再来看一下如何用贝叶斯的方法进行垃圾邮件的判断.<br>假设我们有n封正常邮件和m封垃圾邮件的样本.</p>
<p>设$P(S)$为垃圾邮件的概率,$P(H)$为不是垃圾邮件的概率.</p>
<p>$P(S)+P(H)=1$</p>
<p>获得这个样本的概率$P$为: $P=P(S)^m*(1-P(S))^n$</p>
<p>对P进行求导可以得到: $m x^{m-1} (1-x)^n-n x^m (1-x)^{n-1},x=P(S)$</p>
<p>可以看出$P(S)=m/(n+m)$时,概率P的可能性最大.</p>
<p>假设一个封邮件包含了$D={w1,w2,w3,..wk}$个单词.<br>那么这封邮件是垃圾邮件并且包含了这些单词的概率是:$$$P(D|S)$$$</p>
<p>$P(D|S)=P(w1,w2,w3,…,wk|S)$<br>$P(w1,w2,w3,…wk|S) = P(w1,w2,..,wk-1|S)*P(wk|S,w1,w2,w3,…,w_{k-1})$</p>
<p>反复利用这个链式转换可以得到:<br>$P(D|S) = P(w1|S)P(w2|s,w1)P(w3|S,w1,w2)…P(w<em>{k}|S,w1,w2,w3,…,w</em>{k-1})$</p>
<p>这个概率并不容易算出来,朴素贝叶斯用了一个很强的假设: <strong>所有的w都是独立的</strong></p>
<p>于是$P(D|S) = \left.\prod _{i=1}^k \text{P(wi}\right|S)$</p>
<p>这样概率就容易求多了:</p>
<p>$P(wi|S)=\frac{wi在垃圾邮件中出现的次数+1}{垃圾邮件的出现次数+1}$ (+1是为了防止有0出现)</p>
<p>这样,如果D这些单词出现这篇邮件是垃圾邮件的概率为:<br>$P(S|D) = \frac{P(D|S)<em>P(S)}{P(D)}$<br>同理,D这些单词出现但这个邮件不是垃圾邮件的概率为:<br>$P(H|D) = \frac{P(D|H)</em>P(H)}{P(D)}$<br>可以看到两个式子的分母是一样的,比较分子就可以了.<br>到这里这两个概率都已经非常容易计算了,那个出现的概率高,就选择哪一个就可以了.</p>
<p>在邮件分类中还有一点需要注意的是,一些经常出现但是没有实际意义的词如a,the,is等,可以去掉这样可以提升算法准确度.</p>
<p>虽然朴素贝叶斯分类有非常强的假设,但实际运行中效果还是非常好的,随便找的数据集的分类的准确率可以轻松达到80%以上.</p>
<h5 id="附:_java实现的代码:">附: java实现的代码:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> meachinelearning;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by ckboss on 16-4-8.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NaiveBayes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String trainset = <span class="string">"/home/ckboss/Documents/MachineLearning/数据集/贝叶斯分类器/Naive Bayes/spam_train.txt"</span>;</span><br><span class="line">    String testset = <span class="string">"/home/ckboss/Documents/MachineLearning/数据集/贝叶斯分类器/Naive Bayes/spam_test.txt"</span>;</span><br><span class="line">    String stopwordset = <span class="string">"/home/ckboss/Documents/MachineLearning/数据集/贝叶斯分类器/Naive Bayes/stopwords.txt"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">DataSet</span> </span>&#123;</span><br><span class="line">        List&lt;String[]&gt; data = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;K,V extends Comparable&lt;? <span class="keyword">super</span> V&gt; &gt; Map&lt;K,V&gt; sortByValue(Map&lt;K,V&gt; map) &#123;</span><br><span class="line"></span><br><span class="line">        Map&lt;K,V&gt; result = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        Stream&lt;Map.Entry&lt;K,V&gt;&gt; st = map.entrySet().stream();</span><br><span class="line"></span><br><span class="line">        st.sorted(Comparator.comparing(e-&gt;e.getValue())).forEachOrdered(e-&gt;result.put(e.getKey(),e.getValue()));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">WordProbability</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Map&lt;String,Integer&gt; number = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Map&lt;String,Double&gt; probability = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">WordAdd</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(number.get(word)==<span class="keyword">null</span>) &#123;</span><br><span class="line">                number.put(word,<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                number.put(word,number.get(word)+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">getProbability</span><span class="params">(<span class="keyword">int</span> sum)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(String word : number.keySet()) &#123;</span><br><span class="line">                <span class="keyword">double</span> x = (number.get(word)+(<span class="keyword">double</span>)<span class="number">1</span>)/(sum+(<span class="keyword">double</span>)<span class="number">1</span>);</span><br><span class="line">                probability.put(word,x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    WordProbability[] wordProbabilities = <span class="keyword">new</span> WordProbability[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span>[] emails = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; stopwords = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PreGetStopWords</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(stopwordset));</span><br><span class="line">            <span class="keyword">while</span>(br.ready()) &#123;</span><br><span class="line">                String lines = br.readLine();</span><br><span class="line">                lines.replaceAll(<span class="string">"\n"</span>,<span class="string">""</span>);</span><br><span class="line">                lines.replaceAll(<span class="string">"\r"</span>,<span class="string">""</span>);</span><br><span class="line">                lines.replaceAll(<span class="string">" "</span>,<span class="string">""</span>);</span><br><span class="line">                stopwords.add(lines);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">DataSet <span class="title">ReadFile</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            DataSet ret = <span class="keyword">new</span> DataSet();</span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(filepath));</span><br><span class="line">            <span class="keyword">while</span>(br.ready()) &#123;</span><br><span class="line">                String[] lines = br.readLine().split(<span class="string">" "</span>);</span><br><span class="line">                ret.data.add(lines);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    NaiveBayes() &#123;</span><br><span class="line"></span><br><span class="line">        DataSet traindata = ReadFile(<span class="keyword">this</span>.trainset);</span><br><span class="line">        DataSet testdata =  ReadFile(<span class="keyword">this</span>.testset);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        DataSet testdata = ReadFile(this.trainset);</span><br><span class="line">        DataSet traindata =  ReadFile(this.testset);</span><br><span class="line">        */</span></span><br><span class="line"></span><br><span class="line">        wordProbabilities[<span class="number">0</span>] = <span class="keyword">new</span> WordProbability();</span><br><span class="line">        wordProbabilities[<span class="number">1</span>] = <span class="keyword">new</span> WordProbability();</span><br><span class="line"></span><br><span class="line">        PreGetStopWords();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// train</span></span><br><span class="line">        <span class="keyword">for</span>(String[] line : traindata.data) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> kind = Integer.valueOf(line[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(String word : line) &#123;</span><br><span class="line">                <span class="keyword">if</span>(first) &#123;</span><br><span class="line">                    first=<span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(stopwords.contains(word)) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                wordProbabilities[kind].WordAdd(word);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            emails[kind]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        wordProbabilities[<span class="number">0</span>].getProbability(emails[<span class="number">0</span>]);</span><br><span class="line">        wordProbabilities[<span class="number">1</span>].getProbability(emails[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//System.out.println(emails[0]+" , "+emails[1]);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        Map&lt;String,Integer&gt; result = sortByValue(wordProbabilities[1].number);</span><br><span class="line">        int cnt=20;</span><br><span class="line">        for(String key : result.keySet()) &#123;</span><br><span class="line">            if(cnt&lt;0) break;</span><br><span class="line">            System.out.println(key+" -----&gt; "+result.get(key));</span><br><span class="line">            cnt--;</span><br><span class="line">        &#125;</span><br><span class="line">        */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> correct = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//read data</span></span><br><span class="line">        <span class="keyword">for</span>(String[] line : testdata.data) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> realkind = Integer.valueOf(line[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">double</span> isspam = (<span class="keyword">double</span>)(emails[<span class="number">1</span>]+<span class="number">1</span>)/(emails[<span class="number">0</span>]+emails[<span class="number">1</span>]+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">double</span> notspam = (<span class="keyword">double</span>)(emails[<span class="number">0</span>]+<span class="number">1</span>)/(emails[<span class="number">0</span>]+emails[<span class="number">1</span>]+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(String word : line) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(first) &#123;</span><br><span class="line">                    first=<span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    isspam = isspam * (wordProbabilities[<span class="number">1</span>].probability.get(word));</span><br><span class="line">                    notspam = notspam * (wordProbabilities[<span class="number">0</span>].probability.get(word));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> expect=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(isspam &gt; notspam) &#123;</span><br><span class="line">                expect = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(expect==realkind) &#123;</span><br><span class="line">                correct++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.printf(<span class="string">"正确率: %.4f %%\n"</span>,(<span class="keyword">double</span>)(correct)/testdata.data.size()*<span class="number">100</span>.);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> NaiveBayes();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/04/09/用朴素贝叶斯进行垃圾邮件分类/" data-id="cis4nyuz2000hpwqfo8nzggoa" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MachineLearning/">MachineLearning</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu默认字体设置和Chrome书签栏的Bug" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/26/Ubuntu默认字体设置和Chrome书签栏的Bug/" class="article-date">
  <time datetime="2016-03-26T06:01:59.000Z" itemprop="datePublished">2016-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/26/Ubuntu默认字体设置和Chrome书签栏的Bug/">Ubuntu默认字体设置和Chrome书签栏的Bug</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ubuntu 默认字体设置:</p>
<p>在~/.fonts.conf中设置:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">fontconfig</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- created by WenQuanYi FcDesigner v0.5 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">match</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">test</span> <span class="attribute">name</span>=<span class="value">"family"</span>&gt;</span><span class="tag">&lt;<span class="title">string</span>&gt;</span>sans-serif<span class="tag">&lt;/<span class="title">string</span>&gt;</span><span class="tag">&lt;/<span class="title">test</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">edit</span> <span class="attribute">name</span>=<span class="value">"family"</span> <span class="attribute">mode</span>=<span class="value">"prepend"</span> <span class="attribute">binding</span>=<span class="value">"strong"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">string</span>&gt;</span>Ubuntu<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">match</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">test</span> <span class="attribute">name</span>=<span class="value">"family"</span>&gt;</span><span class="tag">&lt;<span class="title">string</span>&gt;</span>serif<span class="tag">&lt;/<span class="title">string</span>&gt;</span><span class="tag">&lt;/<span class="title">test</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">edit</span> <span class="attribute">name</span>=<span class="value">"family"</span> <span class="attribute">mode</span>=<span class="value">"prepend"</span> <span class="attribute">binding</span>=<span class="value">"strong"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">string</span>&gt;</span>Ubuntu<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">match</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">test</span> <span class="attribute">name</span>=<span class="value">"family"</span>&gt;</span><span class="tag">&lt;<span class="title">string</span>&gt;</span>monospace<span class="tag">&lt;/<span class="title">string</span>&gt;</span><span class="tag">&lt;/<span class="title">test</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">edit</span> <span class="attribute">name</span>=<span class="value">"family"</span> <span class="attribute">mode</span>=<span class="value">"prepend"</span> <span class="attribute">binding</span>=<span class="value">"strong"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">string</span>&gt;</span>Ubuntu Mono<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">fontconfig</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>配置文件可以在<a href="http://wenq.org/cloud/fcdesigner_local.html#" target="_blank" rel="external">这里</a>生成.</p>
<p>用类似: <code>fc-match mono</code>的命令可以查看默认的字体．</p>
<hr>
<p>如果字体更改后,Chrome的输入框和书签栏特别的卡…</p>
<p>可以看这个:<a href="http://suselinks.us/how-to-fix-slow-typing-in-chrome-addressbar-in-linux/" target="_blank" rel="external">linux 系统中 Chrome 地址栏输入卡顿的解决方法</a></p>
<blockquote>
<p>在 Chromium 的故障跟踪系统中有这么个故障：Omnibox popup is slow to paint on Linux &amp; ChromeOS when many suggestions are present，描述的现象和我遇到的一模一样。从该故障的描述和回复来看，可以总结出：</p>
<p>该现象从 Google Chrome 35 版本开始出现。<br>该故障和 Aura UI 有关，而 Aura UI 正是从 35版本开始引入的。<br>启动 Google Chrome 时带上 –enable-harfbuzz-rendertext 参数之后，可以启动 RenderTextHarfbuzz 来进行 UI 文本渲染，在地址栏的键入速度就会变快了。<br>看到这里，我已经抑制不住激动的心情，在 Google Chrome 的启动快捷方式里面火速加入 –enable-harfbuzz-rendertext 参数，重启 Google Chrome，双手张开，准备拥抱胜利的果实。</p>
<p>然而问题依旧……</p>
<p>为什么呢？再仔细阅读上述故障，comment 27 提到了：</p>
<p>　I’m hoping we can enable RenderTextHarfbuzz by default this week, now that font fallback landed. That still may not fix this issue, since RenderTextHarfBuzz::ShapeRun calls internal::CreateSkiaTypeface. I don’t think we ought to cache stylized fonts within a RenderText object, that probably wouldn’t help either. (in this scenario, the omnibox dropdown result views are being tossed and recreated as fast as possible) It seems like we’d need a centralized cache of fonts, so the most commonly used ones are readily available. Perhaps in the near term, OmniboxResultView could cache stylized FontLists for its RenderText instances.</p>
<p>原来问题的根源出在 Skia 的字体这块，然而由于 RenderTextHarfBuzz 还是调用了 internal::CreateSkiaTypeface，所以问题还是可能存在。</p>
<p>转折</p>
<p>有方向了，Skia 的字体问题和 CreateSkiaTypeface API！</p>
<p>再一次，又找到一个故障： Excessive call for SkFontConfigInterfaceDirect::matchFamilyName from OmniboxResultView</p>
<p>故障描述中说，为了渲染地址栏的弹出菜单，每当你输入一个字符， matchFamilyName() 方法就会被调用 100 到 200 次！ 同时 comment 30 给出了真正的问题根源：</p>
<p>　Google Chrome UI 的缺省字体继承自 Gnome 桌面设置（而不是 chrome://settings/）。<br>地址栏弹出框的缺省字体也是继承自 Gnome 桌面设置。<br>字体名称的标准名称和本地化名称不相同导致了 Skia 缓存无法命中。<br>Skia 缓存无法命中导致 fontconfig 频繁被调用，而该调用非常消耗 CPU 时间！<br>结论</p>
<p>啊哈！问题根源找到了！ 该 comment 的作者也提交补丁了，可是 Google Chrome 40、41 版本还没有打该补丁的呀，怎么办呢？ 上述故障的末尾也提到了一个规避方法，那就是修改 Gnome 桌面设置中（GTK）的缺省字体。我这里讲下以 KDE 作为默认桌面的系统的修改方法，打开 系统设置 -&gt; 应用程序外观 -&gt; GTK ，修改字体（默认是 无衬线）为 Droid Sans 或者 DejaVu Sans 或者任何其它没有本地化名称的字体。像默认的 无衬线 以及 文泉驿微米黑 这样的有本地化名称的就不行的， 无衬线 的标准名称是 Sans Serif， 无衬线 是它的本地化名称，这样的字体会导致 Skia 缓存无法命中。<br>根据我的测试，google-chrome-beta-44.0.2403.89 依然尚未合入该补丁。<br>对于 40 版本以前的 Google Chrome ，你还需要在启动 Google Chrome 时带上 –enable-harfbuzz-rendertext 参数。<br>做了上述修改之后，该文开头提到了4个性能问题都解决了！ Google Chrome 和 Opera 都变得异常流畅了，哦耶！</p>
</blockquote>
<p>总之就Chrome的一个bug,现在到了chrome49了还没有得到解决…<br>用一些系统默认的字体就好了,比如Ubuntu….</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/03/26/Ubuntu默认字体设置和Chrome书签栏的Bug/" data-id="cis4nyv0v003cpwqfqyzxcjn7" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016年3月-最近在干什么" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/21/2016年3月-最近在干什么/" class="article-date">
  <time datetime="2016-03-21T14:41:32.000Z" itemprop="datePublished">2016-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/日常/">日常</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/21/2016年3月-最近在干什么/">2016年3月:最近在干什么</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>很久没更新blog了,记录一下最近几个月来的近况.</p>
<h4 id="VirtualJudgePY_的_第一版">VirtualJudgePY 的 第一版</h4><p>曾经尝试过搭建搭建hustVJ,记得那时候各种难搭,没有文档,安装说明混乱,代码太复杂等种种原因,一共也只在本地搭建成功过一次老的版本,最新的版本甚至连对应的sql文件都找不到了.于是准备称毕业设计的计划山寨HustVJ做一个轻量级容易使用的virtualJudge.</p>
<p>当然做vj的其他原因还有当时对爬虫的兴趣,外加练习python和VJ自己留着用.</p>
<p>选择了python3+tornado作为开发的框架,在选择tornado之前尝试学习了一下django,发现djiango框架很强大,什么东西都帮你做好了,不太喜欢这种限制太多的重量级框架,于是就选择了相对轻量级并且更加自由的tornado.</p>
<p>以前听说过scrapy这个爬虫库很厉害,据说还支持python3.遂下载下来,结果发现3.x版本里的字典类型的一个变量名改了,导致scrapy不能正常运行.于是网页爬虫只能通过requests手工写了,好在各大OJ的页面结构都很简单..</p>
<p>在VirtualJudgePY之前,连html都没怎么写过.于是一切都从0开始自己摸索,花了1个多月时间把整个VJ的框架都搭了起来.虽然python没有很强的面向对象要求,但写的时候一直很注意结构化.最后的结果基本满意,尤其是OJ的添加,只需要按照规则实现几个类,完全不需要了解VJ的整结构就可以添加新的OJ.自己尝试手动添加了5个OJ后觉得这套设计确实很方便,于是就又发掘BnuVJ的网络接口,实现了一个VVjudge,最后支持的OJ数和HustOJ一样多了.</p>
<p>受限于人力和自己的需求,Contest功能不准备详细的写了…</p>
<p><img src="http://ww1.sinaimg.cn/mw1024/50a04a61gw1f1xwn7vsqdj21330qhth1.jpg" alt="首页"></p>
<p>第一个web app 基本都是用tornado在服务端进行渲染,没做动态渲染的效果,操作逻辑山寨HDU/PKU,配色山寨HDU,接口盗用Bnuoj,python+html模板代码约4k+,本来是赤裸裸的python项目,因为手贱上传了一个MathJax的js包,github上瞬间js代码的比例占据了99.7%,于是从一个python项目强行被归类到js项目去了…</p>
<h4 id="软件小作坊">软件小作坊</h4><p>上学期被提前喊到华东师范来当一个,某项目的码农,<strong>包吃住,没收入,写爬虫or打杂</strong>….</p>
<p>分配的第一个工作就是写爬虫,而且还让我用一个祖传原创的某java爬虫框架.当时对java爬虫了解不多,直到有一天我在github上看到了一个叫WebCollector的爬虫框架,卧槽这代码一模一样!!!卧槽教程里的example也一模一样!!!卧槽就换了个包名就算自己写的?还发了片论文!!感觉真是日了狗了…而且原版的代码都3.0了,这个抄袭的还只是抄的2.x的版本.</p>
<p>学校这边还表示用祖传代码比较好,不过我没叼…最后还是用的原版.不过后来又看到了一个叫WebMagic的框架,感觉这个设计的更好用一些,后来还尝试使用了一次,可惜看到的时候该写的爬虫已经写完了…</p>
<p>爬虫写完后,又加了个lucene的搜索到那个项目里,后来就没怎么干和这个项目相关的事情了.</p>
<p>再说说小作坊的事情,这个某国企和学校合作的项目,企业方面水平奇差,没有一个美工就拿着那种软件示意图当做原型去做UI了,一个图显示的东西两个月都做不出来,最后的效果还不如一个学长一个晚上做出的示意图好.去掉这个图不说,整个项目企业方面两个月就做了个登陆界面.</p>
<p>就软件项目管理来说,也是很失败的,整个软件架构虽然图上画的结构很清楚,开会上说的分工也很清楚,但做起来前后端的接口都没有定义就开始写了,后端给前端的东西就一个jar包,接口?啥都没有,自己去凑,第一次看到这种开发方式,也许着也是前端开发奇慢的一个原因吧.</p>
<p>人员方面的变动,总共4个人两个月走了两个,最后产品经理也跳槽了,最终这个软件项目因为<strong>非技术性原因</strong>暂停了…</p>
<p>第一次做正式项目就这么结束了,这个故事告诉我们这种没啥含金量的学术产业化多么的坑爹….</p>
<h4 id="其他">其他</h4><p>项目结束了也好,空余了很多时间可以来做自己的事情,最近在看机器学习+基本的数学,最近Alphago不是很火吗?咱以后搞个大数据算命也是不错的….这些算法的研究还是非常有价值的,掌握核心技术才会有真正的竞争力,学习阶段就应该多花点时间研究一些原理,底层的东西.厚积才能薄发…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/03/21/2016年3月-最近在干什么/" data-id="cis4nyv6800cfpwqfe8dah5w6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日常/">日常</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
    <h3 class="widget-title">RevolveMaps</h3>
    <div class="widget">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/8.js?i=5ydrtuq9cfa&amp;m=0&amp;s=220&amp;c=ff0000&amp;cr1=ffffff&amp;f=arial&amp;l=33&amp;bv=90" async="async"></script>
    </div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Diary/">Diary</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MachineLearning/">MachineLearning</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python3小玩意/">Python3小玩意</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu/">Ubuntu</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu相关/">Ubuntu相关</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-dp/">acm_dp</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-math/">acm_math</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-图论/">acm_图论</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-字符串/">acm_字符串</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-想法/">acm_想法</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-想法技巧/">acm_想法技巧</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-搜索/">acm_搜索</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-数学/">acm_数学</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-数据结构/">acm_数据结构</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-数论/">acm_数论</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-暴力/">acm_暴力</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-构造/">acm_构造</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-模拟/">acm_模拟</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-比赛/">acm_比赛</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-水/">acm_水</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-计算几何/">acm_计算几何</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-贪心/">acm_贪心</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/arch/">arch</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/qlcoder/">qlcoder</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日常/">日常</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂/">杂</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2-SAT/">2-SAT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFS/">BFS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/China-Remain/">China_Remain</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Codeforces/">Codeforces</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DP/">DP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FFT/">FFT</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDOJ/">HDOJ</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDA/">IDA*</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KM/">KM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KMP/">KMP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCA/">LCA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCT/">LCT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Log4j/">Log4j</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lucas/">Lucas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MachineLearning/">MachineLearning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python3小玩意/">Python3小玩意</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SAM/">SAM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SAP/">SAP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/">STL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Splay/">Splay</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZOJ/">ZOJ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm/">acm</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-dp/">acm_dp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-图论/">acm_图论</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-搜索/">acm_搜索</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-数据结构/">acm_数据结构</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-贪心/">acm_贪心</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/arch/">arch</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bfs/">bfs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bitset/">bitset</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp/">dp</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp优化/">dp优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/freenom/">freenom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i3wm/">i3wm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/math/">math</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qlcoder/">qlcoder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spfa/">spfa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tornado/">tornado</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/trie/">trie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/上下界/">上下界</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二分/">二分</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/几何/">几何</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/凸包/">凸包</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后缀数组/">后缀数组</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图论/">图论</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/坑/">坑</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/域名/">域名</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大自然/">大自然</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实用工具/">实用工具</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常用软件/">常用软件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并查集/">并查集</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思维/">思维</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/恶模拟/">恶模拟</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/想法/">想法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/想法技巧/">想法技巧</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/想法题/">想法题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索/">搜索</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数位dp/">数位dp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日常/">日常</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/暴力/">暴力</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大流/">最大流</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/构造/">构造</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/枚举/">枚举</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树/">树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树状数组/">树状数组</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树链剖分/">树链剖分</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模拟/">模拟</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/次小生成树/">次小生成树</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/水/">水</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/现场赛/">现场赛</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/矩阵快速幂/">矩阵快速幂</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线段树/">线段树</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/组合数/">组合数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/组合数学/">组合数学</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络流/">网络流</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/背包/">背包</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/观察法/">观察法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贪心/">贪心</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/费用流/">费用流</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/近况/">近况</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/递推/">递推</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随机化/">随机化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高斯消元/">高斯消元</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/2-SAT/" style="font-size: 10px;">2-SAT</a> <a href="/tags/BFS/" style="font-size: 10px;">BFS</a> <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/China-Remain/" style="font-size: 10px;">China_Remain</a> <a href="/tags/Codeforces/" style="font-size: 12px;">Codeforces</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Diary/" style="font-size: 10px;">Diary</a> <a href="/tags/FFT/" style="font-size: 12px;">FFT</a> <a href="/tags/HDOJ/" style="font-size: 16px;">HDOJ</a> <a href="/tags/IDA/" style="font-size: 10px;">IDA*</a> <a href="/tags/Java/" style="font-size: 12px;">Java</a> <a href="/tags/KM/" style="font-size: 10px;">KM</a> <a href="/tags/KMP/" style="font-size: 10px;">KMP</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/LCT/" style="font-size: 10px;">LCT</a> <a href="/tags/Log4j/" style="font-size: 10px;">Log4j</a> <a href="/tags/Lucas/" style="font-size: 10px;">Lucas</a> <a href="/tags/MachineLearning/" style="font-size: 10px;">MachineLearning</a> <a href="/tags/Python3小玩意/" style="font-size: 14px;">Python3小玩意</a> <a href="/tags/SAM/" style="font-size: 12px;">SAM</a> <a href="/tags/SAP/" style="font-size: 10px;">SAP</a> <a href="/tags/STL/" style="font-size: 10px;">STL</a> <a href="/tags/Splay/" style="font-size: 10px;">Splay</a> <a href="/tags/Ubuntu/" style="font-size: 14px;">Ubuntu</a> <a href="/tags/ZOJ/" style="font-size: 10px;">ZOJ</a> <a href="/tags/acm/" style="font-size: 20px;">acm</a> <a href="/tags/acm-dp/" style="font-size: 10px;">acm_dp</a> <a href="/tags/acm-图论/" style="font-size: 12px;">acm_图论</a> <a href="/tags/acm-搜索/" style="font-size: 12px;">acm_搜索</a> <a href="/tags/acm-数据结构/" style="font-size: 12px;">acm_数据结构</a> <a href="/tags/acm-贪心/" style="font-size: 10px;">acm_贪心</a> <a href="/tags/arch/" style="font-size: 10px;">arch</a> <a href="/tags/bfs/" style="font-size: 10px;">bfs</a> <a href="/tags/bitset/" style="font-size: 10px;">bitset</a> <a href="/tags/dp/" style="font-size: 18px;">dp</a> <a href="/tags/dp优化/" style="font-size: 10px;">dp优化</a> <a href="/tags/freenom/" style="font-size: 10px;">freenom</a> <a href="/tags/i3wm/" style="font-size: 10px;">i3wm</a> <a href="/tags/java/" style="font-size: 12px;">java</a> <a href="/tags/math/" style="font-size: 10px;">math</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/qlcoder/" style="font-size: 10px;">qlcoder</a> <a href="/tags/spfa/" style="font-size: 10px;">spfa</a> <a href="/tags/tornado/" style="font-size: 10px;">tornado</a> <a href="/tags/trie/" style="font-size: 10px;">trie</a> <a href="/tags/上下界/" style="font-size: 10px;">上下界</a> <a href="/tags/二分/" style="font-size: 12px;">二分</a> <a href="/tags/几何/" style="font-size: 10px;">几何</a> <a href="/tags/凸包/" style="font-size: 10px;">凸包</a> <a href="/tags/后缀数组/" style="font-size: 10px;">后缀数组</a> <a href="/tags/图论/" style="font-size: 14px;">图论</a> <a href="/tags/坑/" style="font-size: 10px;">坑</a> <a href="/tags/域名/" style="font-size: 10px;">域名</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a> <a href="/tags/大自然/" style="font-size: 10px;">大自然</a> <a href="/tags/实用工具/" style="font-size: 10px;">实用工具</a> <a href="/tags/常用软件/" style="font-size: 10px;">常用软件</a> <a href="/tags/并查集/" style="font-size: 10px;">并查集</a> <a href="/tags/思维/" style="font-size: 10px;">思维</a> <a href="/tags/恶模拟/" style="font-size: 10px;">恶模拟</a> <a href="/tags/想法/" style="font-size: 12px;">想法</a> <a href="/tags/想法技巧/" style="font-size: 12px;">想法技巧</a> <a href="/tags/想法题/" style="font-size: 10px;">想法题</a> <a href="/tags/排序/" style="font-size: 10px;">排序</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/数位dp/" style="font-size: 10px;">数位dp</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/日常/" style="font-size: 16px;">日常</a> <a href="/tags/暴力/" style="font-size: 12px;">暴力</a> <a href="/tags/最大流/" style="font-size: 12px;">最大流</a> <a href="/tags/构造/" style="font-size: 10px;">构造</a> <a href="/tags/枚举/" style="font-size: 10px;">枚举</a> <a href="/tags/树/" style="font-size: 10px;">树</a> <a href="/tags/树状数组/" style="font-size: 12px;">树状数组</a> <a href="/tags/树链剖分/" style="font-size: 10px;">树链剖分</a> <a href="/tags/模拟/" style="font-size: 10px;">模拟</a> <a href="/tags/次小生成树/" style="font-size: 14px;">次小生成树</a> <a href="/tags/水/" style="font-size: 12px;">水</a> <a href="/tags/现场赛/" style="font-size: 12px;">现场赛</a> <a href="/tags/矩阵快速幂/" style="font-size: 10px;">矩阵快速幂</a> <a href="/tags/线段树/" style="font-size: 14px;">线段树</a> <a href="/tags/组合数/" style="font-size: 10px;">组合数</a> <a href="/tags/组合数学/" style="font-size: 10px;">组合数学</a> <a href="/tags/网络流/" style="font-size: 12px;">网络流</a> <a href="/tags/背包/" style="font-size: 12px;">背包</a> <a href="/tags/观察法/" style="font-size: 10px;">观察法</a> <a href="/tags/贪心/" style="font-size: 10px;">贪心</a> <a href="/tags/费用流/" style="font-size: 10px;">费用流</a> <a href="/tags/近况/" style="font-size: 10px;">近况</a> <a href="/tags/递推/" style="font-size: 10px;">递推</a> <a href="/tags/随机化/" style="font-size: 10px;">随机化</a> <a href="/tags/高斯消元/" style="font-size: 12px;">高斯消元</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">33</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/08/21/HDOJ5858/">HDOJ 5858 Hard problem 积分</a>
          </li>
        
          <li>
            <a href="/2016/05/30/Tornado的部署/">服务器上Tornado的运行和部署</a>
          </li>
        
          <li>
            <a href="/2016/05/12/antergos使用小记/">antergos使用小记</a>
          </li>
        
          <li>
            <a href="/2016/04/23/Java生产者和消费者/">简单的Java生产者和消费者</a>
          </li>
        
          <li>
            <a href="/2016/04/23/ubuntu16-04初体验/">ubuntu16.04初体验</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">

      &copy; 2016 CKboss<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>

    <br>

    <!--
	<noscript>
        <div class="statcounter">
            <a title="free web stats"
            href="http://statcounter.com/free-web-stats/"
            target="_blank"><img class="statcounter"
            src="http://c.statcounter.com/10654335/0/b7da4fe1/0/"
            alt="free web stats"></a>
        </div>
    </noscript>
    -->

	<!-- Start of StatCounter Code for Default Guide -->
	<script type="text/javascript">
        var sc_project=10654335; 
        var sc_invisible=0; 
        var sc_security="b7da4fe1"; 
        var scJsHost = (("https:" == document.location.protocol) ?
        "https://secure." : "http://www.");
        document.write("<sc"+"ript type='text/javascript' src='" +
        scJsHost+
        "statcounter.com/counter/counter.js'></"+"script>");
	</script>
	<!-- End of StatCounter Code for Default Guide -->

    &nbsp

    <img src="https://www.digitalocean.com/assets/images/logos-badges/horizontal-color-3d5b56b3.png"/>

    &nbsp

    <img src="http://assets.ubuntu.com/v1/c6679b95-logo-ubuntu-orange.svg"/>

    <br>

    <img src="https://www.unixstickers.com/image/cache/data/stickers/xfce/XFCE-full.sh-80x80.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/vim/xvim.sh-80x80.png.pagespeed.ic.CTRYWxNSlD.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/python/xpython.sh-80x80.png.pagespeed.ic.qUIuK_3cBx.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/xubuntu/xubuntu-logo-+-type.sh-100x100.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/linuxinside/Linux-inside.sh-100x100.png"/>

    </div>
	
  </div>

  
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/About-Me" class="mobile-nav-link">About Me</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.useso.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>


<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<div id="clicki_widget_8954" title=""></div>
<div id="clicki_widget_8955" title=""></div>
  </div>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>