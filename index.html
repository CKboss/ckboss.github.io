<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="content-language" content="zh-cn">
  
  <title>码代码的猿猿</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="码代码的猿猿">
<meta property="og:url" content="http://www.ckboss.cf/index.html">
<meta property="og:site_name" content="码代码的猿猿">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="码代码的猿猿">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="码代码的猿猿" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.useso.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

  <script>
var option = {
  engineKey: '6bc51dc1f882fefa226b'
};
(function(w,d,t,u,n,s,e){
  s = d.createElement(t);
  s.src = u;
  s.async = 1;
  w[n] = function(r){
    w[n].opts = r;
  };
  e = d.getElementsByTagName(t)[0];
  e.parentNode.insertBefore(s, e);
})(window,document,'script','//tinysou-cdn.b0.upaiyun.com/ts.js','_ts');
_ts(option);
</script>

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">码代码的猿猿</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">码代码的猿猿的ac之路</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/About-Me">About Me</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form class="search-form">
          <input type="text" id="ts-search-input"  name="word" maxlength="20"  class="search-form-input" placeholder="搜索">
        </form>
      </div>
    </div>
  </div>
  <script>
var option = {
  engineKey: '6bc51dc1f882fefa226b'
};
(function(w,d,t,u,n,s,e){
  s = d.createElement(t);
  s.src = u;
  s.async = 1;
  w[n] = function(r){
    w[n].opts = r;
  };
  e = d.getElementsByTagName(t)[0];
  e.parentNode.insertBefore(s, e);
})(window,document,'script','//tinysou-cdn.b0.upaiyun.com/ts.js','_ts');
_ts(option);
</script>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-用朴素贝叶斯进行垃圾邮件分类" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/04/09/用朴素贝叶斯进行垃圾邮件分类/" class="article-date">
  <time datetime="2016-04-08T17:38:59.000Z" itemprop="datePublished">2016-04-09</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/wMachineLearning/">:wMachineLearning</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/04/09/用朴素贝叶斯进行垃圾邮件分类/">用朴素贝叶斯进行垃圾邮件分类</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>朴素贝叶斯算法非常简单,但是在实际运用中效果往往还不错…</p>
<p>贝叶斯公式:<br>$P(A,B)=P(A|B)<em>P(B)=P(B|A)</em>P(A)$<br>非常简单的概率公式,但有一个奇妙的用途就是可以让两个条件概率之间互相转换.</p>
<p>举个例子:</p>
<ul>
<li>今天天上有云的概率 $$P(A)$$</li>
<li>今天天上下雨的概率 $$P(B)$$</li>
<li>今天从天上有云推出今天天上下雨的条件概率是 $$P(B|A)$$</li>
</ul>
<p>但这个概率并不太好直接计算,不过我们可以统计出今天天上下雨并且天上有云的概率$$P(A|B)$$,这样就可以用贝叶斯公式来推出$$P(B|A)$$了,统计的数据越多,推出来的概率也就越准确.</p>
<p>再来看一下如何用贝叶斯的方法进行垃圾邮件的判断.<br>假设我们有n封正常邮件和m封垃圾邮件的样本.</p>
<p>设$$P(S)$$为垃圾邮件的概率,$$P(H)$$为不是垃圾邮件的概率.</p>
<p>$P(S)+P(H)=1$</p>
<p>获得这个样本的概率$P$为: $P=P(S)^m*(1-P(S))^n$</p>
<p>对P进行求导可以得到: $m x^{m-1} (1-x)^n-n x^m (1-x)^{n-1},x=P(S)$</p>
<p>可以看出$P(S)=m/(n+m)$时,概率P的可能性最大.</p>
<p>假设一个封邮件包含了$D={w1,w2,w3,..wk}$个单词.<br>那么这封邮件是垃圾邮件并且包含了这些单词的概率是:$$$P(D|S)$$$</p>
<p>$P(D|S)=P(w1,w2,w3,…,wk|S)$<br>$P(w1,w2,w3,…wk|S) = P(w1,w2,..,wk-1|S)*P(wk|S,w1,w2,w3,…,w_{k-1})$</p>
<p>反复利用这个链式转换可以得到:<br>$P(D|S) = P(w1|S)P(w2|s,w1)P(w3|S,w1,w2)…P(w<em>{k}|S,w1,w2,w3,…,w</em>{k-1})$</p>
<p>这个概率并不容易算出来,朴素贝叶斯用了一个很强的假设: <strong>所有的w都是独立的</strong></p>
<p>于是$P(D|S) = \left.\prod _{i=1}^k \text{P(wi}\right|S)$</p>
<p>这样概率就容易求多了:</p>
<p>$P(wi|S)=wi在垃圾邮件中出现的次数+1/垃圾邮件的出现次数+1$ (+1是为了防止有0出现)</p>
<p>这样,如果D这些单词出现这篇邮件是垃圾邮件的概率为:<br>$P(S|D) = \frac{P(D|S)<em>P(S)}{P(D)}$<br>同理,D这些单词出现但这个邮件不是垃圾邮件的概率为:<br>$P(H|D) = \frac{P(D|H)</em>P(H)}{P(D)}$<br>可以看到两个式子的分母是一样的,比较分子就可以了.<br>到这里这两个概率都已经非常容易计算了,那个出现的概率高,就选择哪一个就可以了.</p>
<p>在邮件分类中还有一点需要注意的是,一些经常出现但是没有实际意义的词如a,the,is等,可以去掉这样可以提升算法准确度.</p>
<p>虽然朴素贝叶斯分类有非常强的假设,但实际运行中效果还是非常好的,随便找的数据集的分类的准确率可以轻松达到80%以上.</p>
<h5 id="附:_java实现的代码:">附: java实现的代码:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> meachinelearning;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">import</span> java.util.stream.Stream;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> * Created by ckboss on 16-4-8.</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">NaiveBayes</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    String trainset = <span class="string">"/home/ckboss/Documents/MachineLearning/数据集/贝叶斯分类器/Naive Bayes/spam_train.txt"</span>;</span><br><span class="line">    String testset = <span class="string">"/home/ckboss/Documents/MachineLearning/数据集/贝叶斯分类器/Naive Bayes/spam_test.txt"</span>;</span><br><span class="line">    String stopwordset = <span class="string">"/home/ckboss/Documents/MachineLearning/数据集/贝叶斯分类器/Naive Bayes/stopwords.txt"</span>;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">DataSet</span> </span>&#123;</span><br><span class="line">        List&lt;String[]&gt; data = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> &lt;K,V extends Comparable&lt;? <span class="keyword">super</span> V&gt; &gt; Map&lt;K,V&gt; sortByValue(Map&lt;K,V&gt; map) &#123;</span><br><span class="line"></span><br><span class="line">        Map&lt;K,V&gt; result = <span class="keyword">new</span> LinkedHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        Stream&lt;Map.Entry&lt;K,V&gt;&gt; st = map.entrySet().stream();</span><br><span class="line"></span><br><span class="line">        st.sorted(Comparator.comparing(e-&gt;e.getValue())).forEachOrdered(e-&gt;result.put(e.getKey(),e.getValue()));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">WordProbability</span></span>&#123;</span><br><span class="line"></span><br><span class="line">        Map&lt;String,Integer&gt; number = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        Map&lt;String,Double&gt; probability = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">WordAdd</span><span class="params">(String word)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(number.get(word)==<span class="keyword">null</span>) &#123;</span><br><span class="line">                number.put(word,<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                number.put(word,number.get(word)+<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">void</span> <span class="title">getProbability</span><span class="params">(<span class="keyword">int</span> sum)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">for</span>(String word : number.keySet()) &#123;</span><br><span class="line">                <span class="keyword">double</span> x = (number.get(word)+(<span class="keyword">double</span>)<span class="number">1</span>)/(sum+(<span class="keyword">double</span>)<span class="number">1</span>);</span><br><span class="line">                probability.put(word,x);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    WordProbability[] wordProbabilities = <span class="keyword">new</span> WordProbability[<span class="number">2</span>];</span><br><span class="line">    <span class="keyword">int</span>[] emails = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">    Set&lt;String&gt; stopwords = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">PreGetStopWords</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(stopwordset));</span><br><span class="line">            <span class="keyword">while</span>(br.ready()) &#123;</span><br><span class="line">                String lines = br.readLine();</span><br><span class="line">                lines.replaceAll(<span class="string">"\n"</span>,<span class="string">""</span>);</span><br><span class="line">                lines.replaceAll(<span class="string">"\r"</span>,<span class="string">""</span>);</span><br><span class="line">                lines.replaceAll(<span class="string">" "</span>,<span class="string">""</span>);</span><br><span class="line">                stopwords.add(lines);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function">DataSet <span class="title">ReadFile</span><span class="params">(String filepath)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            DataSet ret = <span class="keyword">new</span> DataSet();</span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> FileReader(filepath));</span><br><span class="line">            <span class="keyword">while</span>(br.ready()) &#123;</span><br><span class="line">                String[] lines = br.readLine().split(<span class="string">" "</span>);</span><br><span class="line">                ret.data.add(lines);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> ret;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    NaiveBayes() &#123;</span><br><span class="line"></span><br><span class="line">        DataSet traindata = ReadFile(<span class="keyword">this</span>.trainset);</span><br><span class="line">        DataSet testdata =  ReadFile(<span class="keyword">this</span>.testset);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        DataSet testdata = ReadFile(this.trainset);</span><br><span class="line">        DataSet traindata =  ReadFile(this.testset);</span><br><span class="line">        */</span></span><br><span class="line"></span><br><span class="line">        wordProbabilities[<span class="number">0</span>] = <span class="keyword">new</span> WordProbability();</span><br><span class="line">        wordProbabilities[<span class="number">1</span>] = <span class="keyword">new</span> WordProbability();</span><br><span class="line"></span><br><span class="line">        PreGetStopWords();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// train</span></span><br><span class="line">        <span class="keyword">for</span>(String[] line : traindata.data) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> kind = Integer.valueOf(line[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line">            <span class="keyword">for</span>(String word : line) &#123;</span><br><span class="line">                <span class="keyword">if</span>(first) &#123;</span><br><span class="line">                    first=<span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(stopwords.contains(word)) &#123;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                wordProbabilities[kind].WordAdd(word);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            emails[kind]++;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        wordProbabilities[<span class="number">0</span>].getProbability(emails[<span class="number">0</span>]);</span><br><span class="line">        wordProbabilities[<span class="number">1</span>].getProbability(emails[<span class="number">1</span>]);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//System.out.println(emails[0]+" , "+emails[1]);</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span><br><span class="line">        Map&lt;String,Integer&gt; result = sortByValue(wordProbabilities[1].number);</span><br><span class="line">        int cnt=20;</span><br><span class="line">        for(String key : result.keySet()) &#123;</span><br><span class="line">            if(cnt&lt;0) break;</span><br><span class="line">            System.out.println(key+" -----&gt; "+result.get(key));</span><br><span class="line">            cnt--;</span><br><span class="line">        &#125;</span><br><span class="line">        */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> correct = <span class="number">0</span>;</span><br><span class="line">        <span class="comment">//read data</span></span><br><span class="line">        <span class="keyword">for</span>(String[] line : testdata.data) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> realkind = Integer.valueOf(line[<span class="number">0</span>]);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">double</span> isspam = (<span class="keyword">double</span>)(emails[<span class="number">1</span>]+<span class="number">1</span>)/(emails[<span class="number">0</span>]+emails[<span class="number">1</span>]+<span class="number">1</span>);</span><br><span class="line">            <span class="keyword">double</span> notspam = (<span class="keyword">double</span>)(emails[<span class="number">0</span>]+<span class="number">1</span>)/(emails[<span class="number">0</span>]+emails[<span class="number">1</span>]+<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">for</span>(String word : line) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span>(first) &#123;</span><br><span class="line">                    first=<span class="keyword">false</span>;</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    isspam = isspam * (wordProbabilities[<span class="number">1</span>].probability.get(word));</span><br><span class="line">                    notspam = notspam * (wordProbabilities[<span class="number">0</span>].probability.get(word));</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">int</span> expect=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">if</span>(isspam &gt; notspam) &#123;</span><br><span class="line">                expect = <span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(expect==realkind) &#123;</span><br><span class="line">                correct++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.printf(<span class="string">"正确率: %.4f %%\n"</span>,(<span class="keyword">double</span>)(correct)/testdata.data.size()*<span class="number">100</span>.);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> NaiveBayes();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/04/09/用朴素贝叶斯进行垃圾邮件分类/" data-id="cims1l1eb0000gdonvibmpqua" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/MachineLearning/">MachineLearning</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Ubuntu默认字体设置和Chrome书签栏的Bug" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/26/Ubuntu默认字体设置和Chrome书签栏的Bug/" class="article-date">
  <time datetime="2016-03-26T06:01:59.000Z" itemprop="datePublished">2016-03-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/26/Ubuntu默认字体设置和Chrome书签栏的Bug/">Ubuntu默认字体设置和Chrome书签栏的Bug</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ubuntu 默认字体设置:</p>
<p>在~/.fonts.conf中设置:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="pi">&lt;?xml version="1.0"?&gt;</span></span><br><span class="line"><span class="doctype">&lt;!DOCTYPE fontconfig SYSTEM "fonts.dtd"&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">fontconfig</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- created by WenQuanYi FcDesigner v0.5 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">match</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">test</span> <span class="attribute">name</span>=<span class="value">"family"</span>&gt;</span><span class="tag">&lt;<span class="title">string</span>&gt;</span>sans-serif<span class="tag">&lt;/<span class="title">string</span>&gt;</span><span class="tag">&lt;/<span class="title">test</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">edit</span> <span class="attribute">name</span>=<span class="value">"family"</span> <span class="attribute">mode</span>=<span class="value">"prepend"</span> <span class="attribute">binding</span>=<span class="value">"strong"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">string</span>&gt;</span>Ubuntu<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">match</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">test</span> <span class="attribute">name</span>=<span class="value">"family"</span>&gt;</span><span class="tag">&lt;<span class="title">string</span>&gt;</span>serif<span class="tag">&lt;/<span class="title">string</span>&gt;</span><span class="tag">&lt;/<span class="title">test</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">edit</span> <span class="attribute">name</span>=<span class="value">"family"</span> <span class="attribute">mode</span>=<span class="value">"prepend"</span> <span class="attribute">binding</span>=<span class="value">"strong"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">string</span>&gt;</span>Ubuntu<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">match</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">test</span> <span class="attribute">name</span>=<span class="value">"family"</span>&gt;</span><span class="tag">&lt;<span class="title">string</span>&gt;</span>monospace<span class="tag">&lt;/<span class="title">string</span>&gt;</span><span class="tag">&lt;/<span class="title">test</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="title">edit</span> <span class="attribute">name</span>=<span class="value">"family"</span> <span class="attribute">mode</span>=<span class="value">"prepend"</span> <span class="attribute">binding</span>=<span class="value">"strong"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="title">string</span>&gt;</span>Ubuntu Mono<span class="tag">&lt;/<span class="title">string</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="title">edit</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">match</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">fontconfig</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>配置文件可以在<a href="http://wenq.org/cloud/fcdesigner_local.html#" target="_blank" rel="external">这里</a>生成.</p>
<p>用类似: <code>fc-match mono</code>的命令可以查看默认的字体．</p>
<hr>
<p>如果字体更改后,Chrome的输入框和书签栏特别的卡…</p>
<p>可以看这个:<a href="http://suselinks.us/how-to-fix-slow-typing-in-chrome-addressbar-in-linux/" target="_blank" rel="external">linux 系统中 Chrome 地址栏输入卡顿的解决方法</a></p>
<blockquote>
<p>在 Chromium 的故障跟踪系统中有这么个故障：Omnibox popup is slow to paint on Linux &amp; ChromeOS when many suggestions are present，描述的现象和我遇到的一模一样。从该故障的描述和回复来看，可以总结出：</p>
<p>该现象从 Google Chrome 35 版本开始出现。<br>该故障和 Aura UI 有关，而 Aura UI 正是从 35版本开始引入的。<br>启动 Google Chrome 时带上 –enable-harfbuzz-rendertext 参数之后，可以启动 RenderTextHarfbuzz 来进行 UI 文本渲染，在地址栏的键入速度就会变快了。<br>看到这里，我已经抑制不住激动的心情，在 Google Chrome 的启动快捷方式里面火速加入 –enable-harfbuzz-rendertext 参数，重启 Google Chrome，双手张开，准备拥抱胜利的果实。</p>
<p>然而问题依旧……</p>
<p>为什么呢？再仔细阅读上述故障，comment 27 提到了：</p>
<p>　I’m hoping we can enable RenderTextHarfbuzz by default this week, now that font fallback landed. That still may not fix this issue, since RenderTextHarfBuzz::ShapeRun calls internal::CreateSkiaTypeface. I don’t think we ought to cache stylized fonts within a RenderText object, that probably wouldn’t help either. (in this scenario, the omnibox dropdown result views are being tossed and recreated as fast as possible) It seems like we’d need a centralized cache of fonts, so the most commonly used ones are readily available. Perhaps in the near term, OmniboxResultView could cache stylized FontLists for its RenderText instances.</p>
<p>原来问题的根源出在 Skia 的字体这块，然而由于 RenderTextHarfBuzz 还是调用了 internal::CreateSkiaTypeface，所以问题还是可能存在。</p>
<p>转折</p>
<p>有方向了，Skia 的字体问题和 CreateSkiaTypeface API！</p>
<p>再一次，又找到一个故障： Excessive call for SkFontConfigInterfaceDirect::matchFamilyName from OmniboxResultView</p>
<p>故障描述中说，为了渲染地址栏的弹出菜单，每当你输入一个字符， matchFamilyName() 方法就会被调用 100 到 200 次！ 同时 comment 30 给出了真正的问题根源：</p>
<p>　Google Chrome UI 的缺省字体继承自 Gnome 桌面设置（而不是 chrome://settings/）。<br>地址栏弹出框的缺省字体也是继承自 Gnome 桌面设置。<br>字体名称的标准名称和本地化名称不相同导致了 Skia 缓存无法命中。<br>Skia 缓存无法命中导致 fontconfig 频繁被调用，而该调用非常消耗 CPU 时间！<br>结论</p>
<p>啊哈！问题根源找到了！ 该 comment 的作者也提交补丁了，可是 Google Chrome 40、41 版本还没有打该补丁的呀，怎么办呢？ 上述故障的末尾也提到了一个规避方法，那就是修改 Gnome 桌面设置中（GTK）的缺省字体。我这里讲下以 KDE 作为默认桌面的系统的修改方法，打开 系统设置 -&gt; 应用程序外观 -&gt; GTK ，修改字体（默认是 无衬线）为 Droid Sans 或者 DejaVu Sans 或者任何其它没有本地化名称的字体。像默认的 无衬线 以及 文泉驿微米黑 这样的有本地化名称的就不行的， 无衬线 的标准名称是 Sans Serif， 无衬线 是它的本地化名称，这样的字体会导致 Skia 缓存无法命中。<br>根据我的测试，google-chrome-beta-44.0.2403.89 依然尚未合入该补丁。<br>对于 40 版本以前的 Google Chrome ，你还需要在启动 Google Chrome 时带上 –enable-harfbuzz-rendertext 参数。<br>做了上述修改之后，该文开头提到了4个性能问题都解决了！ Google Chrome 和 Opera 都变得异常流畅了，哦耶！</p>
</blockquote>
<p>总之就Chrome的一个bug,现在到了chrome49了还没有得到解决…<br>用一些系统默认的字体就好了,比如Ubuntu….</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/03/26/Ubuntu默认字体设置和Chrome书签栏的Bug/" data-id="cims1icvb002te1onvli27ug2" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016年3月-最近在干什么" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/21/2016年3月-最近在干什么/" class="article-date">
  <time datetime="2016-03-21T14:41:32.000Z" itemprop="datePublished">2016-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/日常/">日常</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/21/2016年3月-最近在干什么/">2016年3月:最近在干什么</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>很久没更新blog了,记录一下最近几个月来的近况.</p>
<h4 id="VirtualJudgePY_的_第一版">VirtualJudgePY 的 第一版</h4><p>曾经尝试过搭建搭建hustVJ,记得那时候各种难搭,没有文档,安装说明混乱,代码太复杂等种种原因,一共也只在本地搭建成功过一次老的版本,最新的版本甚至连对应的sql文件都找不到了.于是准备称毕业设计的计划山寨HustVJ做一个轻量级容易使用的virtualJudge.</p>
<p>当然做vj的其他原因还有当时对爬虫的兴趣,外加练习python和VJ自己留着用.</p>
<p>选择了python3+tornado作为开发的框架,在选择tornado之前尝试学习了一下django,发现djiango框架很强大,什么东西都帮你做好了,不太喜欢这种限制太多的重量级框架,于是就选择了相对轻量级并且更加自由的tornado.</p>
<p>以前听说过scrapy这个爬虫库很厉害,据说还支持python3.遂下载下来,结果发现3.x版本里的字典类型的一个变量名改了,导致scrapy不能正常运行.于是网页爬虫只能通过requests手工写了,好在各大OJ的页面结构都很简单..</p>
<p>在VirtualJudgePY之前,连html都没怎么写过.于是一切都从0开始自己摸索,花了1个多月时间把整个VJ的框架都搭了起来.虽然python没有很强的面向对象要求,但写的时候一直很注意结构化.最后的结果基本满意,尤其是OJ的添加,只需要按照规则实现几个类,完全不需要了解VJ的整结构就可以添加新的OJ.自己尝试手动添加了5个OJ后觉得这套设计确实很方便,于是就又发掘BnuVJ的网络接口,实现了一个VVjudge,最后支持的OJ数和HustOJ一样多了.</p>
<p>受限于人力和自己的需求,Contest功能不准备详细的写了…</p>
<p><img src="http://ww1.sinaimg.cn/mw1024/50a04a61gw1f1xwn7vsqdj21330qhth1.jpg" alt="首页"></p>
<p>第一个web app 基本都是用tornado在服务端进行渲染,没做动态渲染的效果,操作逻辑山寨HDU/PKU,配色山寨HDU,接口盗用Bnuoj,python+html模板代码约4k+,本来是赤裸裸的python项目,因为手贱上传了一个MathJax的js包,github上瞬间js代码的比例占据了99.7%,于是从一个python项目强行被归类到js项目去了…</p>
<h4 id="软件小作坊">软件小作坊</h4><p>上学期被提前喊到华东师范来当一个,某项目的码农,<strong>包吃住,没收入,写爬虫or打杂</strong>….</p>
<p>分配的第一个工作就是写爬虫,而且还让我用一个祖传原创的某java爬虫框架.当时对java爬虫了解不多,直到有一天我在github上看到了一个叫WebCollector的爬虫框架,卧槽这代码一模一样!!!卧槽教程里的example也一模一样!!!卧槽就换了个包名就算自己写的?还发了片论文!!感觉真是日了狗了…而且原版的代码都3.0了,这个抄袭的还只是抄的2.x的版本.</p>
<p>学校这边还表示用祖传代码比较好,不过我没叼…最后还是用的原版.不过后来又看到了一个叫WebMagic的框架,感觉这个设计的更好用一些,后来还尝试使用了一次,可惜看到的时候该写的爬虫已经写完了…</p>
<p>爬虫写完后,又加了个lucene的搜索到那个项目里,后来就没怎么干和这个项目相关的事情了.</p>
<p>再说说小作坊的事情,这个某国企和学校合作的项目,企业方面水平奇差,没有一个美工就拿着那种软件示意图当做原型去做UI了,一个图显示的东西两个月都做不出来,最后的效果还不如一个学长一个晚上做出的示意图好.去掉这个图不说,整个项目企业方面两个月就做了个登陆界面.</p>
<p>就软件项目管理来说,也是很失败的,整个软件架构虽然图上画的结构很清楚,开会上说的分工也很清楚,但做起来前后端的接口都没有定义就开始写了,后端给前端的东西就一个jar包,接口?啥都没有,自己去凑,第一次看到这种开发方式,也许着也是前端开发奇慢的一个原因吧.</p>
<p>人员方面的变动,总共4个人两个月走了两个,最后产品经理也跳槽了,最终这个软件项目因为<strong>非技术性原因</strong>暂停了…</p>
<p>第一次做正式项目就这么结束了,这个故事告诉我们这种没啥含金量的学术产业化多么的坑爹….</p>
<h4 id="其他">其他</h4><p>项目结束了也好,空余了很多时间可以来做自己的事情,最近在看机器学习+基本的数学,最近Alphago不是很火吗?咱以后搞个大数据算命也是不错的….这些算法的研究还是非常有价值的,掌握核心技术才会有真正的竞争力,学习阶段就应该多花点时间研究一些原理,底层的东西.厚积才能薄发…</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/03/21/2016年3月-最近在干什么/" data-id="cims1icyr00b9e1onqrwx4807" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日常/">日常</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-qlcoder-时间线2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/03/21/qlcoder-时间线2/" class="article-date">
  <time datetime="2016-03-21T14:29:59.000Z" itemprop="datePublished">2016-03-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/qlcoder/">qlcoder</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/03/21/qlcoder-时间线2/">qlcoder-时间线2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="近况:">近况:</h4><p>写了不少业务代码…</p>
<p>VirtualJudgePY第一个版本也接近完工…</p>
<p>平时没事的时候主要看一些数学和机器学习入门书和java多线程和haskell和…</p>
<p>当然,最主要的事情是为了键盘去做qlcoder..</p>
<p>很久没更新blog了,主要感觉自己退ACM后没啥东西好写的…</p>
<hr>
<p>最近在qlcoder看到了一个关于时间线的问题…</p>
<p><a href="http://www.qlcoder.com/task/7662" target="_blank" rel="external">链接</a></p>
<p>然后就用分块的办法跑了一下,大概一天就出来了….</p>
<p>这个问题主要在于要对质数进行特殊的处理,暴力的方法肯定是要爆内存和超时的.</p>
<p>1000w中有大约60w+个质数,我们可以通过对质数分块来一定程度上降低时间复杂度.</p>
<h5 id="具体方法如下:">具体方法如下:</h5><p>将质数分为800块每块800个,为啥要这样分呢?(其实是$\sqrt{n} * \sqrt{n}$)</p>
<p>我们来考虑一下分块之后的操作.</p>
<p>对于P操作:</p>
<p><strong> p x msg </strong></p>
<ul>
<li><p>对于x,我们先直接向x的倍数直接推送x的信息.这个时间复杂度很低大概是$O(nlogn)$</p>
</li>
<li><p>如果x是质数,我们直接向x所属的质数块中推送一条信息,只推送到质数块里就好了</p>
</li>
</ul>
<p>分块后,p操作占用的时间其实很少</p>
<p>对于v操作:</p>
<p><strong> v x </strong></p>
<p>x 应该接收到的信息应该有两个部分</p>
<ol>
<li>由x的因数直接推送过来的信息(这个部分的信息应该在p操作时就处理好了)</li>
<li>由比他大的质数推送过来的信息(这个部分的处理很占时间)</li>
</ol>
<p>如何找到那些质数推送过来的消息呢?</p>
<p>对于来源1的消息可以存在队列中,v操作完了之后清空.<br>对于来源2的消息是存在质数块中的,不能随意清空,所以我们还应该:</p>
<ol>
<li>对于质数块中的每一条消息,维护一个发送的时间t,和是由那个质数发出的</li>
<li>对于每个数x,应该维护一个lastV,记录对数字x上一次执行v操作的时间</li>
</ol>
<p>首先应该找到x在哪个质数块的后面或者在哪个质数块的范围内,这个也很容易确定,假设x在i号质数块中.</p>
<p><del>根据分块问题的一般做法,先对x所在的块进行暴力判断(大约有800个质数发送的消息,判读这个质数是否比x大,及该消息发送的时间是否大于lastV[x]),然后在对$i+1..800$的块内的所有消息的发送时间进行遍历检查,最后排序输出,就可以解决了….</del></p>
<p>很可惜,没有找到更有效率的做法.不过尽管如此,java的实现已经可以在3g内存占用的情况下,24小时以内解决了.</p>
<h5 id="伪代码:">伪代码:</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(br.ready()) &#123;</span><br><span class="line">          String line = br.readLine();</span><br><span class="line">          cnt++;</span><br><span class="line">          String[] itmes = line.split(<span class="string">" "</span>);</span><br><span class="line">          <span class="comment">//System.out.println("READ LINE: "+line);</span></span><br><span class="line"></span><br><span class="line">          <span class="keyword">int</span> x = Integer.valueOf(itmes[<span class="number">1</span>]);</span><br><span class="line">          <span class="keyword">int</span> kuai = <span class="keyword">this</span>.getKuai(x);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">if</span>(itmes.length==<span class="number">3</span>) &#123;</span><br><span class="line">              <span class="comment">/// p</span></span><br><span class="line">              <span class="comment">/*</span><br><span class="line">              1. 往每个数的倍数上推送消息</span><br><span class="line">              2. 如果这个数是质数,则推送消息到所在的质数块</span><br><span class="line">               */</span></span><br><span class="line"></span><br><span class="line">              String info = itmes[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">              <span class="comment">/// 往每个数的倍数上推送消息</span></span><br><span class="line">              <span class="keyword">for</span>(<span class="keyword">int</span> i=x*<span class="number">2</span>;i&lt;maxn;i+=x) &#123;</span><br><span class="line">                  AddMsgToX(i,info,cnt);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="comment">//如果这个数是质数,则推送消息到所在的质数块</span></span><br><span class="line">              <span class="keyword">if</span>(isPrime(x)) &#123;</span><br><span class="line">                  AddMsgToBag(kuai, info, cnt, x);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              <span class="comment">/// v</span></span><br><span class="line">              <span class="comment">/*</span><br><span class="line">              1. 这个数字直接收到的消息</span><br><span class="line">              2. 在当前块中收到的消息</span><br><span class="line">              3. 在之后块中收到的消息</span><br><span class="line">               */</span></span><br><span class="line"></span><br><span class="line">              Vector&lt;Message&gt; receieve = <span class="keyword">new</span> Vector&lt;&gt;();</span><br><span class="line"></span><br><span class="line">              <span class="comment">//这个数字直接收到的消息</span></span><br><span class="line">              <span class="keyword">if</span>(<span class="keyword">this</span>.itemmessage[x] != <span class="keyword">null</span>) &#123;</span><br><span class="line">                  <span class="keyword">for</span> (Object o : <span class="keyword">this</span>.itemmessage[x]) &#123;</span><br><span class="line">                      receieve.add((Message) o);</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="comment">//遍历当前所在的块的消息,将所在块中的时间关系和大小关系都满足的消息接收掉</span></span><br><span class="line"></span><br><span class="line">              <span class="keyword">int</span> lasttime = getLastV(x);</span><br><span class="line"></span><br><span class="line">              <span class="comment">//System.out.println("kuai: "+kuai+" x: "+x);</span></span><br><span class="line">              <span class="keyword">for</span>(Object o: <span class="keyword">this</span>.bagmessage[kuai])&#123;</span><br><span class="line">                  Message msg = (Message)o;</span><br><span class="line">                  <span class="keyword">if</span>( (msg.prime&gt;x) &amp;&amp; (msg.time&gt;lasttime) ) &#123;</span><br><span class="line">                      receieve.add(msg);</span><br><span class="line">                  &#125;</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="comment">//在之后的块中接收满足时间关系的消息</span></span><br><span class="line"></span><br><span class="line">              <span class="keyword">for</span>(<span class="keyword">int</span> i=kuai+<span class="number">1</span>;i&lt;=pcz.bid;i++) &#123;</span><br><span class="line"></span><br><span class="line">                  <span class="keyword">for</span>(Object o: <span class="keyword">this</span>.bagmessage[i]) &#123;</span><br><span class="line">                      Message msg = (Message)o;</span><br><span class="line">                      <span class="keyword">if</span>(msg.time&gt;lasttime) &#123;</span><br><span class="line">                          receieve.add(msg);</span><br><span class="line">                      &#125;</span><br><span class="line">                  &#125;</span><br><span class="line"></span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="comment">//按时间排序后即这次拉取到的消息,并同时更新时间</span></span><br><span class="line"></span><br><span class="line">              List&lt;Message&gt; vlist = receieve;</span><br><span class="line">              Collections.sort(vlist);</span><br><span class="line">              ClearMsgToX(x);</span><br><span class="line">              updLastV(x,cnt);</span><br><span class="line"></span><br><span class="line">              <span class="comment">//System.out.printf("%d Receive MSG!!\n",x);</span></span><br><span class="line">              <span class="comment">//System.out.println(vlist.size());</span></span><br><span class="line">              StringBuffer Hang = <span class="keyword">new</span> StringBuffer(<span class="string">""</span>);</span><br><span class="line">              <span class="keyword">boolean</span> first = <span class="keyword">true</span>;</span><br><span class="line">              <span class="keyword">for</span>(Message msg : vlist) &#123;</span><br><span class="line">                  <span class="keyword">if</span>(first==<span class="keyword">true</span>) &#123;</span><br><span class="line">                      first=<span class="keyword">false</span>;</span><br><span class="line">                  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                      <span class="comment">//System.out.printf("-");</span></span><br><span class="line">                      Hang.append(<span class="string">"-"</span>);</span><br><span class="line">                  &#125;</span><br><span class="line">                  <span class="comment">//System.out.printf(msg.msg);</span></span><br><span class="line">                  Hang.append(msg.msg);</span><br><span class="line">              &#125;</span><br><span class="line"></span><br><span class="line">              <span class="comment">//System.out.println("");</span></span><br><span class="line">              MD5 md5 = <span class="keyword">new</span> MD5(String.valueOf(Hang));</span><br><span class="line">              pw.write(md5.getMD5()+<span class="string">"\n"</span>);</span><br><span class="line">              pw.flush();</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<h5 id="一些也许可行的优化">一些也许可行的优化</h5><ol>
<li>质数块中的数字用某种数据结构维护时间顺序,不再需要遍历所有的信息</li>
<li>在遍历之后的块中,可以开多个线程并行操作</li>
<li>…</li>
<li>…</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/03/21/qlcoder-时间线2/" data-id="cims1ictu001ae1on31wg22a1" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/qlcoder/">qlcoder</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/数据结构/">数据结构</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-鸟枪换炮" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/02/18/鸟枪换炮/" class="article-date">
  <time datetime="2016-02-18T02:38:27.000Z" itemprop="datePublished">2016-02-18</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/日常/">日常</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/02/18/鸟枪换炮/">喜大普奔，装备升级</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>喜大普奔，装备终于升级了 , hp 291tx，上了i7和8g的内存，写起代码更爽了。。。</p>
<p>就是高分屏字体有点小，感觉不太适应。。。</p>
<p>这款机型又两个严重的设计问题:</p>
<ol>
<li>fx功能键设置很奇葩.</li>
<li>触摸板是关不掉的.</li>
</ol>
<p>此外,硬盘声音很大…</p>
<p>迁移了下资料，又重装了遍ubuntu 14.04。。。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">                         ./+o+-       ckboss@ckboss-HP&#10;                 yyyyy- -yyyyyy+      OS: ubuntu Ubuntu 14.04 trusty&#10;              ://+//////-yyyyyyo      Kernel: x86_64 Linux 3.19.0-49-generic&#10;          .++ .:/++++++/-.+sss/`      Uptime: 13h 35m&#10;        .:++o:  /++++++++/:--:/-      Packages: 2120&#10;       o:+o+:++.`..```.-/oo+++++/     Shell: zsh 5.0.2&#10;      .:+o:+o/.          `+sssoo+/    Resolution: 1920x1080&#10; .++/+:+oo+o:`             /sssooo.   DE: XFCE&#10;/+++//+:`oo+o               /::--:.   WM: Xfwm4&#10;\+/+o+++`o++o               ++////.   WM Theme: Kokodi&#10; .++.o+++oo+:`             /dddhhh.   GTK Theme: Radiance [GTK2]&#10;      .+.o+oo:.          `oddhhhh+    Icon Theme: elementary-xfce&#10;       \+.++o+o``-````.:ohdhhhhh+     Font: Droid Sans 12&#10;        `:o+++ `ohhhhhhhhyo++os:      CPU: Intel Core i7-6500U CPU @ 2.1GHz&#10;          .o:`.syhhhhhhh/.oo++o`      RAM: 2677MiB / 7823MiB&#10;              /osyyyyyyo++ooo+++/    &#10;                  ````` +oo+++o\:    &#10;                         `oo++.</span><br></pre></td></tr></table></figure>
<p>记录几个安装时遇到的问题：</p>
<ul>
<li><strong>intel-dual-band-wireless-ac-3165-drivers</strong></li>
</ul>
<p>14.04下默认没有这个网卡的驱动…</p>
<p><a href="http://ubuntuforums.org/showthread.php?t=2214075" target="_blank" rel="external">http://ubuntuforums.org/showthread.php?t=2214075</a></p>
<p><a href="http://askubuntu.com/questions/672700/how-can-i-install-intel-dual-band-wireless-ac-3165-drivers" target="_blank" rel="external">http://askubuntu.com/questions/672700/how-can-i-install-intel-dual-band-wireless-ac-3165-drivers</a></p>
<p>在 <a href="https://wireless.wiki.kernel.org/en/users/Drivers/iwlwifi" target="_blank" rel="external">here</a> 可下载到最新的驱动.</p>
<blockquote>
<p>Intel® Wireless 7265<br>Intel® Wireless 3165 (starting from firmware XX.XX.13.0 and kernel 4.1)</p>
</blockquote>
<p>下载后改名,再解压到/lib/firmware/ 里就可以正常启动了</p>
<ul>
<li><strong>nodejs 安装</strong></li>
</ul>
<p>现在官网上直接提供二进制的安装包了,把node和npm软连接到 /usr/local/bin 里就可以了,很方便</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/02/18/鸟枪换炮/" data-id="cims1icsl0003e1onhbk33tm6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/日常/">日常</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-Java模拟两小球的碰撞" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/12/Java模拟两小球的碰撞/" class="article-date">
  <time datetime="2016-01-11T17:09:39.000Z" itemprop="datePublished">2016-01-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/12/Java模拟两小球的碰撞/">Java模拟两小球的碰撞</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="2016年第二更…">2016年第二更…</h6><p>最近写了一个模拟两个小球,无能量损失碰撞的java小程序….</p>
<h5 id="介绍_java_绘图的网站"><a href="https://www3.ntu.edu.sg/home/ehchua/programming/java/J4b_CustomGraphics.html" target="_blank" rel="external">介绍 java 绘图的网站</a></h5><h5 id="模拟两个小球碰撞_网上的demo">模拟两个小球碰撞  <a href="http://www.cnblogs.com/kenkofox/archive/2011/09/06/2168944.html" target="_blank" rel="external">网上的demo</a></h5><h5 id="碰撞时速度的变化"><a href="http://tina0152.blog.163.com/blog/static/119447958200910229109326/" target="_blank" rel="external">碰撞时速度的变化</a></h5><p><em>碰撞的代码</em>:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Collision</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> base = <span class="number">50</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span> w = <span class="number">500</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">double</span> eps = <span class="number">1e-5</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">distanceSQ</span><span class="params">(Circle c1,Circle c2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">double</span> dx = Math.abs(c1.x - c2.x);</span><br><span class="line">        <span class="keyword">double</span> dy = Math.abs(c1.y - c2.y);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> dx*dx+dy*dy;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CirToCirS</span><span class="params">(Circle c , Vector&lt;Circle&gt; vc)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">boolean</span> flag=<span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span>(Circle othercircle : vc) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(othercircle.equals(c)) &#123;</span><br><span class="line">                flag=<span class="keyword">true</span>;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag==<span class="keyword">false</span>) &#123;</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag==<span class="keyword">true</span>) &#123;</span><br><span class="line">                CircleToCircle(c,othercircle);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CircleToCircle</span><span class="params">(Circle c1,Circle c2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(CheckCirlceToCircle(c1,c2)) &#123;</span><br><span class="line">            <span class="comment">/// change vector</span></span><br><span class="line"></span><br><span class="line">            VVector vss = <span class="keyword">new</span> VVector(c2.x-c1.x,c2.y-c1.y);</span><br><span class="line">            vss = vss.unitfy();</span><br><span class="line">            VVector vst = <span class="keyword">new</span> VVector(vss.y,-vss.x);</span><br><span class="line"></span><br><span class="line">            VVector v1 = <span class="keyword">new</span> VVector(c1.vx,c1.vy);</span><br><span class="line">            VVector v2 = <span class="keyword">new</span> VVector(c2.vx,c2.vy);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">double</span> v1s = v1.dotMul(vss);</span><br><span class="line">            <span class="keyword">double</span> v2s = v2.dotMul(vss);</span><br><span class="line">            <span class="keyword">double</span> v1t = v1.dotMul(vst);</span><br><span class="line">            <span class="keyword">double</span> v2t = v2.dotMul(vst);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">double</span> temp = v1s; v1s=v2s; v2s=temp;</span><br><span class="line"></span><br><span class="line">            VVector v1tV = vst.mul(v1t);</span><br><span class="line">            VVector v1sV = vss.mul(v1s);</span><br><span class="line">            VVector v2tV = vst.mul(v2t);</span><br><span class="line">            VVector v2sV = vss.mul(v2s);</span><br><span class="line"></span><br><span class="line">            c1.vx=v1tV.x+v1sV.x; c1.vy=v1tV.y+v1sV.y;</span><br><span class="line">            c2.vx=v2tV.x+v2sV.x; c2.vy=v2tV.y+v2sV.y;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">CirlcleToWall</span><span class="params">(Circle cirlce)</span> </span>&#123;</span><br><span class="line">        Vector&lt;Integer&gt; vi = <span class="keyword">new</span> Vector&lt;Integer&gt;();</span><br><span class="line">        vi = CheckCircleToWall(cirlce);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(Integer x : vi) &#123;</span><br><span class="line">            <span class="keyword">if</span>(x==<span class="number">1</span>||x==<span class="number">3</span>) &#123;</span><br><span class="line">               cirlce.vx*=-<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(x==<span class="number">2</span>||x==<span class="number">4</span>) &#123;</span><br><span class="line">               cirlce.vy*=-<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">CheckCirlceToCircle</span><span class="params">(Circle c1,Circle c2)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(distanceSQ(c1, c2)+eps&lt;(<span class="keyword">double</span>)((c1.r+c2.r)*(c1.r+c2.r)))</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// 0 no Collison</span></span><br><span class="line">    <span class="comment">/// 1 North 2 East 3 South 4 West</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Vector&lt;Integer&gt; <span class="title">CheckCircleToWall</span><span class="params">(Circle c)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Vector&lt;Integer&gt; ret = <span class="keyword">new</span> Vector&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(c.x+c.r&gt;w+base) &#123;</span><br><span class="line">            ret.add(<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(c.x-c.r&lt;base) &#123;</span><br><span class="line">            ret.add(<span class="number">3</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(c.y+c.r&gt;w+base) &#123;</span><br><span class="line">            ret.add(<span class="number">4</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(c.y-c.r&lt;base) &#123;</span><br><span class="line">            ret.add(<span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> ret;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/01/12/Java模拟两小球的碰撞/" data-id="cims1icvl0039e1on004qp6ju" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java爬虫" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/01/12/java爬虫/" class="article-date">
  <time datetime="2016-01-11T16:18:46.000Z" itemprop="datePublished">2016-01-12</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/杂/">杂</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/01/12/java爬虫/">Java爬虫简单介绍</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h6 id="2016年第一更…">2016年第一更…</h6><p>上个月写了不少java的爬虫,总结一下常用的java爬虫框架.</p>
<p>试用了两个比较常见的java爬虫相关框架,WebCollector和WebMagic.</p>
<h2 id="Part1_正常向爬虫框架">Part1 正常向爬虫框架</h2><h3 id="WebCollector">WebCollector</h3><hr>
<h6 id="1-_项目主页:WebCollector">1. 项目主页:<a href="https://github.com/CrawlScript/WebCollector" target="_blank" rel="external">WebCollector</a></h6><h6 id="2-_简单的使用方法:">2. 简单的使用方法:</h6><p>扩展一个Crawler类,根据需要重载两个方法即可…</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">visit</span><span class="params">(Page page, CrawlDatums next)</span> </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">"visiting:"</span>+page.getUrl()+<span class="string">"\tdepth="</span>+page.getMetaData(<span class="string">"depth"</span>));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>visit 方法用于访问到指定页面时在该页面进行的操作,在这里可以写爬虫的具体的抓取操作.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="annotation">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterVisit</span><span class="params">(Page page, CrawlDatums next)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.afterVisit(page, next); </span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>
<p>默认的 afterVisit 函数处理在找到的页面中将那些URL加入到后续的搜索队列中去,如果有需要可以重写这个函数.</p>
<p>WebCollector 的2.0版本中有一个非常好用的特性,对于每一个datum可以附加一个叫做MetaData的东西,可以用来记录跟随Datum的一些信息比如页面的深度,在一些情况下非常方便.</p>
<p>一个调用示例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">       DemoDepthCrawler crawler=<span class="keyword">new</span> DemoDepthCrawler(<span class="string">"depth_crawler"</span>, <span class="keyword">true</span>);</span><br><span class="line">       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=<span class="number">5</span>;i++)&#123;</span><br><span class="line">           crawler.addSeed(<span class="keyword">new</span> CrawlDatum(<span class="string">"http://news.hfut.edu.cn/list-1-"</span>+i+<span class="string">".html"</span>)</span><br><span class="line">                   .putMetaData(<span class="string">"depth"</span>, <span class="string">"1"</span>));</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">/*正则规则用于控制爬虫自动解析出的链接，用户手动添加的链接，例如添加的种子、或</span><br><span class="line">         在visit方法中添加到next中的链接并不会参与正则过滤*/</span></span><br><span class="line">       <span class="comment">/*自动爬取类似"http://news.hfut.edu.cn/show-xxxxxxhtml"的链接*/</span></span><br><span class="line">       crawler.addRegex(<span class="string">"http://news.hfut.edu.cn/show-.*html"</span>);</span><br><span class="line">       <span class="comment">/*不要爬取jpg|png|gif*/</span></span><br><span class="line">       crawler.addRegex(<span class="string">"-.*\\.(jpg|png|gif).*"</span>);</span><br><span class="line">       <span class="comment">/*不要爬取包含"#"的链接*/</span></span><br><span class="line">       crawler.addRegex(<span class="string">"-.*#.*"</span>);</span><br><span class="line">       crawler.start(<span class="number">2</span>);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>更多的内容可以取看代码中的example</p>
<h3 id="WebMagic">WebMagic</h3><p><img src="https://camo.githubusercontent.com/77fe3da40f9b2c5839df0267890a2457a64003e0/68747470733a2f2f7261772e6769746875622e636f6d2f636f64653463726166742f7765626d616769632f6d61737465722f6173736574732f6c6f676f2e6a7067" alt="WebMagic"></p>
<hr>
<p>WebMagic是设计的非常好的一个爬虫,如果要使用java编写爬虫那么非常推荐使用.</p>
<p>可惜因为考虑到项目的兼容问题,暂时没有深入的研究这个爬虫.</p>
<p>项目地址: <a href="https://github.com/code4craft/webmagic" target="_blank" rel="external">WebMagic</a></p>
<p>非常齐全的手册: <a href="http://webmagic.io/docs/" target="_blank" rel="external">docs</a></p>
<h2 id="Part2_非主流爬虫">Part2 非主流爬虫</h2><hr>
<p>大部分的爬虫框架都是模拟浏览器的请求,但是很多网站是防爬虫的,或者有很多的不明js等动态网页信息…对于这样的网站可以想办法操作浏览器进行爬取.</p>
<p>在编写爬虫的时候,只要模拟用户的操作就可以了,比如要加载一个js不需要进行任何的分析,模拟操作后wait一下就加载好了.</p>
<p>这种方法的优点是可以有效的反反爬虫,方便的爬去动态内容,缺点也很明显,因为往往在后台需要调用浏览器,所以资源消耗很大,处理速度也很慢,在调用这类浏览器的时候可以考虑关闭图片的加载,css渲染等…</p>
<p>一些可供调用的浏览器…</p>
<h4 id="httpunit"><a href="http://httpunit.sourceforge.net/" target="_blank" rel="external">httpunit</a></h4><p><img src="http://httpunit.sourceforge.net/doc/images/HttpUnit.jpg" alt="httpunit"></p>
<p>httpunit是一个java写的无界面浏览器,通过调用httpunit的api可以模拟浏览器访问网站.</p>
<p><strong>httpunit有个致命的缺点</strong>,它对js支持非常的差,大部分的js都没法正常的解析,暂时不适合用来做解析动态网页的爬虫!!!</p>
<h4 id="phantomjs">phantomjs</h4><p><img src="http://phantomjs.org/img/phantomjs-logo.png" alt=""></p>
<p><a href="http://phantomjs.org/" target="_blank" rel="external">项目主页</a></p>
<p>也是个浏览器,没有提供linux下的安装包,暂时没有试用这个…</p>
<h4 id="selenium">selenium</h4><p><img src="http://www.seleniumhq.org/images/selenium-logo.png" alt=""></p>
<p><a href="http://www.seleniumhq.org/" target="_blank" rel="external">项目主页</a></p>
<p>selenium是一个网站测试工具,可以用来模拟用户的操作,可以支持java,python,c#等对多种语言对浏览器调用.</p>
<p>selenium 在 火狐 上有个叫做 selenium IDE的插件,安装这插件后可以记录用户的操作,并且可以自动生成代码,非常方便.</p>
<p>selenium 支持很多的浏览器包括httpuity,建议调用火狐/谷歌等保证对网页的兼容性.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2016/01/12/java爬虫/" data-id="cims1icu1001me1onylvpny6l" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-使用实时更新的卫星照片做桌面壁纸" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/10/使用实时更新的卫星照片做桌面壁纸/" class="article-date">
  <time datetime="2015-12-10T07:44:13.000Z" itemprop="datePublished">2015-12-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python3小玩意/">Python3小玩意</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/10/使用实时更新的卫星照片做桌面壁纸/">使用实时更新的卫星照片做桌面壁纸</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><a href="https://www.v2ex.com/t/241563#reply62" target="_blank" rel="external">V2EX里的一篇帖子….</a></p>
<p>抓取日本的向日葵8号卫星每十分钟更新的的地球照片作为桌面壁纸.</p>
<p><img src="https://cloud.githubusercontent.com/assets/6072743/11613290/6af013a8-9c56-11e5-8d7e-553cc8226d5a.png" alt="示意图1"></p>
<p>感觉效果不错就顺手用Python自己做了一个:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">old_md5=<span class="string">''</span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">True</span>:</span><br><span class="line"></span><br><span class="line">    json = requests.get(<span class="string">'http://himawari8.nict.go.jp/img/D531106/latest.json'</span>)</span><br><span class="line">    Md5 = hashlib.md5()</span><br><span class="line">    json = str(json.content).encode(<span class="string">'utf-8'</span>)</span><br><span class="line">    Md5.update(json)</span><br><span class="line">    now_md5=Md5.hexdigest()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> old_md5!=now_md5 :</span><br><span class="line">        old_md5=now_md5</span><br><span class="line"></span><br><span class="line">        url_2=<span class="string">''</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">11</span>,<span class="number">30</span>) :</span><br><span class="line">            <span class="keyword">if</span> json[i]==<span class="number">58</span> :</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            <span class="keyword">elif</span> json[i]==<span class="number">45</span> <span class="keyword">or</span> json[i]==<span class="number">32</span> :</span><br><span class="line">                url_2=url_2+<span class="string">'/'</span></span><br><span class="line">            <span class="keyword">else</span> :</span><br><span class="line">                url_2+=str(json[i]-ord(<span class="string">'0'</span>))</span><br><span class="line">        url_1=<span class="string">'http://himawari8-dl.nict.go.jp/himawari8/img/D531106/thumbnail/550/'</span></span><br><span class="line">        url_3=<span class="string">'_0_0.png'</span></span><br><span class="line">        url = url_1+url_2+url_3</span><br><span class="line">        print(url)</span><br><span class="line"></span><br><span class="line">        r = requests.get(url)</span><br><span class="line">        f = open(<span class="string">'/home/ckboss/Pictures/壁纸/Eath/tt.png'</span>,<span class="string">'bw'</span>)</span><br><span class="line">        f.write(r.content)</span><br><span class="line">        f.close()</span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        time.sleep(<span class="number">300</span>)</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2015/12/10/使用实时更新的卫星照片做桌面壁纸/" data-id="cims1ictk000ze1onk8nk5hkp" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python3小玩意/">Python3小玩意</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-坑爹的freenom域名" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/05/坑爹的freenom域名/" class="article-date">
  <time datetime="2015-12-04T16:14:34.000Z" itemprop="datePublished">2015-12-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/日常/">日常</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/12/05/坑爹的freenom域名/">坑爹freenom随意取消域名</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>晚上看了下邮箱，发现了这个：</p>
<p><img src="http://ww1.sinaimg.cn/mw1024/50a04a61gw1eyo32a0i1wj20ix0demz2.jpg" alt=""></p>
<p>freenom说我的域名违规,给取消了…..</p>
<p>看了下360监控:<br><img src="http://ww1.sinaimg.cn/mw1024/50a04a61gw1eyo32dn2arj20hf0cc0uf.jpg" alt=""></p>
<p><strong>果然便宜没好货…</strong></p>
<p>网上搜索了下有人也碰到了<a href="http://www.bennythink.com/remember-domain-name-change-controversy.html" target="_blank" rel="external">同样的情况</a></p>
<blockquote>
<p>天底下没有免费的午餐！便宜没好货！请允许我无耻的这样推断：freenom发现我这域名还有不少解析量，于是在恰好注册三个月之后收回域名，逼我一年10美刀买.</p>
</blockquote>
<p>现已修复,如果继续这样的话….<br>马上就会有新的域名了….</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2015/12/05/坑爹的freenom域名/" data-id="cims1ict5000he1onnodrjrmt" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/freenom/">freenom</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/域名/">域名</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-近况201511" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/11/23/近况201511/" class="article-date">
  <time datetime="2015-11-23T05:04:10.000Z" itemprop="datePublished">2015-11-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/日常/">日常</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/11/23/近况201511/">近况2015年11月 ACM退役 和 模版Release</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="近况:">近况:</h4><h5 id="1-_ACM生涯正式结束了,我这么弱应该就不需要什么退役感言了-">1. ACM生涯正式结束了,我这么弱应该就不需要什么退役感言了.</h5><h5 id="2-_整理了一下模版,放出了第一个v0-1-alpha-1的pre-release…">2. 整理了一下模版,放出了第一个<strong>v0.1-alpha.1的pre-release</strong>…</h5><h5 id="下载地址:_MyAcmTemplate_Nov_23_2015">下载地址:  <a href="https://github.com/CKboss/MyAcmTemplate/releases/tag/v0.1-alpha.1" target="_blank" rel="external">MyAcmTemplate Nov 23 2015</a></h5><h4 id="最近在做什么:">最近在做什么:</h4><h5 id="1-_复习期末考试">1. 复习期末考试</h5><h5 id="2-_学习一下Django框架,顺手写个毕业设计(准备写个VJ)">2. 学习一下Django框架,顺手写个毕业设计(准备写个VJ)</h5><h6 id="PS:_推荐一个Django1-8的入门教程:https://www-youtube-com/watch?v=cvceyNioank_和_这个老外的youtube的主页:">PS: 推荐一个Django1.8的入门教程:<a href="https://www.youtube.com/watch?v=cvceyNioank" target="_blank" rel="external">https://www.youtube.com/watch?v=cvceyNioank</a> 和 <a href="https://www.youtube.com/channel/UCWEHue8kksIaktO8KTTN_zg" target="_blank" rel="external">这个老外的youtube的主页:</a></h6><h4 id="将来做什么:">将来做什么:</h4><p>学习一下 Linux,Unix高级编程,编译原理,Haskell等…<br>以后可能会搞一点 机器学习+数据挖掘 , 然后应用在: 大数据算命上…</p>
<h4 id="博客内容变化:">博客内容变化:</h4><p>会从题解博客转型为技术博客,不过接下来一段时间应该会学习一些基础知识,应该没什么好更新的…</p>
<p>当然过一段时间后,会重新开始刷点题,主战场会换成BZOJ….</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.ckboss.cf/2015/11/23/近况201511/" data-id="cims1icsu0008e1onq8enl4h9" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/近况/">近况</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/wMachineLearning/">:wMachineLearning</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Diary/">Diary</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python3小玩意/">Python3小玩意</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ubuntu相关/">Ubuntu相关</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-dp/">acm_dp</a><span class="category-list-count">11</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-图论/">acm_图论</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-字符串/">acm_字符串</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-想法/">acm_想法</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-想法技巧/">acm_想法技巧</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-搜索/">acm_搜索</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-数学/">acm_数学</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-数据结构/">acm_数据结构</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-数论/">acm_数论</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-暴力/">acm_暴力</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-构造/">acm_构造</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-模拟/">acm_模拟</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-比赛/">acm_比赛</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-水/">acm_水</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-计算几何/">acm_计算几何</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/acm-贪心/">acm_贪心</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/qlcoder/">qlcoder</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/日常/">日常</a><span class="category-list-count">8</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/杂/">杂</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2-SAT/">2-SAT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BFS/">BFS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Blog/">Blog</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/China-Remain/">China_Remain</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Codeforces/">Codeforces</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DP/">DP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Diary/">Diary</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FFT/">FFT</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HDOJ/">HDOJ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IDA/">IDA*</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KM/">KM</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/KMP/">KMP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCA/">LCA</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/LCT/">LCT</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Lucas/">Lucas</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MachineLearning/">MachineLearning</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Python3小玩意/">Python3小玩意</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SAM/">SAM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SAP/">SAP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/STL/">STL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Splay/">Splay</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ubuntu/">Ubuntu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZOJ/">ZOJ</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm/">acm</a><span class="tag-list-count">12</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-dp/">acm_dp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-图论/">acm_图论</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-搜索/">acm_搜索</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-数据结构/">acm_数据结构</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acm-贪心/">acm_贪心</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bfs/">bfs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bitset/">bitset</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp/">dp</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dp优化/">dp优化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/freenom/">freenom</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/i3wm/">i3wm</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qlcoder/">qlcoder</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/spfa/">spfa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/trie/">trie</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/上下界/">上下界</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/二分/">二分</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/几何/">几何</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/凸包/">凸包</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后缀数组/">后缀数组</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/图论/">图论</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/坑/">坑</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/域名/">域名</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/大自然/">大自然</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/常用软件/">常用软件</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/并查集/">并查集</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/思维/">思维</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/恶模拟/">恶模拟</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/想法/">想法</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/想法技巧/">想法技巧</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/想法题/">想法题</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序/">排序</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/搜索/">搜索</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数位dp/">数位dp</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/数据结构/">数据结构</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/日常/">日常</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/暴力/">暴力</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最大流/">最大流</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/构造/">构造</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/枚举/">枚举</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树/">树</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树状数组/">树状数组</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树链剖分/">树链剖分</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/模拟/">模拟</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/次小生成树/">次小生成树</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/水/">水</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/现场赛/">现场赛</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/矩阵快速幂/">矩阵快速幂</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/线段树/">线段树</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/组合数/">组合数</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/组合数学/">组合数学</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络流/">网络流</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/背包/">背包</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/观察法/">观察法</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/贪心/">贪心</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/费用流/">费用流</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/近况/">近况</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/递推/">递推</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随机化/">随机化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/高斯消元/">高斯消元</a><span class="tag-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/2-SAT/" style="font-size: 10px;">2-SAT</a> <a href="/tags/BFS/" style="font-size: 10px;">BFS</a> <a href="/tags/Blog/" style="font-size: 10px;">Blog</a> <a href="/tags/China-Remain/" style="font-size: 10px;">China_Remain</a> <a href="/tags/Codeforces/" style="font-size: 12px;">Codeforces</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Diary/" style="font-size: 10px;">Diary</a> <a href="/tags/FFT/" style="font-size: 12px;">FFT</a> <a href="/tags/HDOJ/" style="font-size: 14px;">HDOJ</a> <a href="/tags/IDA/" style="font-size: 10px;">IDA*</a> <a href="/tags/KM/" style="font-size: 10px;">KM</a> <a href="/tags/KMP/" style="font-size: 10px;">KMP</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/LCT/" style="font-size: 10px;">LCT</a> <a href="/tags/Lucas/" style="font-size: 10px;">Lucas</a> <a href="/tags/MachineLearning/" style="font-size: 10px;">MachineLearning</a> <a href="/tags/Python3小玩意/" style="font-size: 14px;">Python3小玩意</a> <a href="/tags/SAM/" style="font-size: 12px;">SAM</a> <a href="/tags/SAP/" style="font-size: 10px;">SAP</a> <a href="/tags/STL/" style="font-size: 10px;">STL</a> <a href="/tags/Splay/" style="font-size: 10px;">Splay</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/ZOJ/" style="font-size: 10px;">ZOJ</a> <a href="/tags/acm/" style="font-size: 20px;">acm</a> <a href="/tags/acm-dp/" style="font-size: 10px;">acm_dp</a> <a href="/tags/acm-图论/" style="font-size: 12px;">acm_图论</a> <a href="/tags/acm-搜索/" style="font-size: 12px;">acm_搜索</a> <a href="/tags/acm-数据结构/" style="font-size: 12px;">acm_数据结构</a> <a href="/tags/acm-贪心/" style="font-size: 10px;">acm_贪心</a> <a href="/tags/bfs/" style="font-size: 10px;">bfs</a> <a href="/tags/bitset/" style="font-size: 10px;">bitset</a> <a href="/tags/dp/" style="font-size: 18px;">dp</a> <a href="/tags/dp优化/" style="font-size: 10px;">dp优化</a> <a href="/tags/freenom/" style="font-size: 10px;">freenom</a> <a href="/tags/i3wm/" style="font-size: 10px;">i3wm</a> <a href="/tags/java/" style="font-size: 12px;">java</a> <a href="/tags/qlcoder/" style="font-size: 10px;">qlcoder</a> <a href="/tags/spfa/" style="font-size: 10px;">spfa</a> <a href="/tags/trie/" style="font-size: 10px;">trie</a> <a href="/tags/上下界/" style="font-size: 10px;">上下界</a> <a href="/tags/二分/" style="font-size: 12px;">二分</a> <a href="/tags/几何/" style="font-size: 10px;">几何</a> <a href="/tags/凸包/" style="font-size: 10px;">凸包</a> <a href="/tags/后缀数组/" style="font-size: 10px;">后缀数组</a> <a href="/tags/图论/" style="font-size: 14px;">图论</a> <a href="/tags/坑/" style="font-size: 10px;">坑</a> <a href="/tags/域名/" style="font-size: 10px;">域名</a> <a href="/tags/大自然/" style="font-size: 10px;">大自然</a> <a href="/tags/常用软件/" style="font-size: 10px;">常用软件</a> <a href="/tags/并查集/" style="font-size: 10px;">并查集</a> <a href="/tags/思维/" style="font-size: 10px;">思维</a> <a href="/tags/恶模拟/" style="font-size: 10px;">恶模拟</a> <a href="/tags/想法/" style="font-size: 12px;">想法</a> <a href="/tags/想法技巧/" style="font-size: 12px;">想法技巧</a> <a href="/tags/想法题/" style="font-size: 10px;">想法题</a> <a href="/tags/排序/" style="font-size: 10px;">排序</a> <a href="/tags/搜索/" style="font-size: 10px;">搜索</a> <a href="/tags/数位dp/" style="font-size: 10px;">数位dp</a> <a href="/tags/数据结构/" style="font-size: 10px;">数据结构</a> <a href="/tags/日常/" style="font-size: 16px;">日常</a> <a href="/tags/暴力/" style="font-size: 12px;">暴力</a> <a href="/tags/最大流/" style="font-size: 12px;">最大流</a> <a href="/tags/构造/" style="font-size: 10px;">构造</a> <a href="/tags/枚举/" style="font-size: 10px;">枚举</a> <a href="/tags/树/" style="font-size: 10px;">树</a> <a href="/tags/树状数组/" style="font-size: 12px;">树状数组</a> <a href="/tags/树链剖分/" style="font-size: 10px;">树链剖分</a> <a href="/tags/模拟/" style="font-size: 10px;">模拟</a> <a href="/tags/次小生成树/" style="font-size: 14px;">次小生成树</a> <a href="/tags/水/" style="font-size: 12px;">水</a> <a href="/tags/现场赛/" style="font-size: 12px;">现场赛</a> <a href="/tags/矩阵快速幂/" style="font-size: 10px;">矩阵快速幂</a> <a href="/tags/线段树/" style="font-size: 14px;">线段树</a> <a href="/tags/组合数/" style="font-size: 10px;">组合数</a> <a href="/tags/组合数学/" style="font-size: 10px;">组合数学</a> <a href="/tags/网络流/" style="font-size: 12px;">网络流</a> <a href="/tags/背包/" style="font-size: 12px;">背包</a> <a href="/tags/观察法/" style="font-size: 10px;">观察法</a> <a href="/tags/贪心/" style="font-size: 10px;">贪心</a> <a href="/tags/费用流/" style="font-size: 10px;">费用流</a> <a href="/tags/近况/" style="font-size: 10px;">近况</a> <a href="/tags/递推/" style="font-size: 10px;">递推</a> <a href="/tags/随机化/" style="font-size: 10px;">随机化</a> <a href="/tags/高斯消元/" style="font-size: 12px;">高斯消元</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">November 2015</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">28</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">September 2015</a><span class="archive-list-count">33</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/04/09/用朴素贝叶斯进行垃圾邮件分类/">用朴素贝叶斯进行垃圾邮件分类</a>
          </li>
        
          <li>
            <a href="/2016/03/26/Ubuntu默认字体设置和Chrome书签栏的Bug/">Ubuntu默认字体设置和Chrome书签栏的Bug</a>
          </li>
        
          <li>
            <a href="/2016/03/21/2016年3月-最近在干什么/">2016年3月:最近在干什么</a>
          </li>
        
          <li>
            <a href="/2016/03/21/qlcoder-时间线2/">qlcoder-时间线2</a>
          </li>
        
          <li>
            <a href="/2016/02/18/鸟枪换炮/">喜大普奔，装备升级</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">

      &copy; 2016 CKboss<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>

    <br>

    <!--
	<noscript>
        <div class="statcounter">
            <a title="free web stats"
            href="http://statcounter.com/free-web-stats/"
            target="_blank"><img class="statcounter"
            src="http://c.statcounter.com/10654335/0/b7da4fe1/0/"
            alt="free web stats"></a>
        </div>
    </noscript>
    -->

	<!-- Start of StatCounter Code for Default Guide -->
	<script type="text/javascript">
        var sc_project=10654335; 
        var sc_invisible=0; 
        var sc_security="b7da4fe1"; 
        var scJsHost = (("https:" == document.location.protocol) ?
        "https://secure." : "http://www.");
        document.write("<sc"+"ript type='text/javascript' src='" +
        scJsHost+
        "statcounter.com/counter/counter.js'></"+"script>");
	</script>
	<!-- End of StatCounter Code for Default Guide -->

    &nbsp

    <img src="https://www.digitalocean.com/assets/images/logos-badges/horizontal-color-3d5b56b3.png"/>

    &nbsp

    <img src="http://assets.ubuntu.com/v1/c6679b95-logo-ubuntu-orange.svg"/>

    <br>

    <img src="https://www.unixstickers.com/image/cache/data/stickers/xfce/XFCE-full.sh-80x80.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/vim/xvim.sh-80x80.png.pagespeed.ic.CTRYWxNSlD.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/python/xpython.sh-80x80.png.pagespeed.ic.qUIuK_3cBx.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/xubuntu/xubuntu-logo-+-type.sh-100x100.png"/>

    &nbsp

    <img src="https://www.unixstickers.com/image/cache/data/stickers/linuxinside/Linux-inside.sh-100x100.png"/>

    </div>
	
  </div>

  
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/About-Me" class="mobile-nav-link">About Me</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.useso.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>


<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<script type='text/javascript'>
(function() {
    var c = document.createElement('script'); 
    c.type = 'text/javascript';
    c.async = true;
    c.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'www.clicki.cn/boot/52210';
    var h = document.getElementsByTagName('script')[0];
    h.parentNode.insertBefore(c, h);
})();
</script>

<div id="clicki_widget_8954" title=""></div>
<div id="clicki_widget_8955" title=""></div>
  </div>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>