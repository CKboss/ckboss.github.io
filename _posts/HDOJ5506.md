title: HDOJ 5506 GT and set 暴力搜索
date: 2015-10-20 22:23:06
tags:
- 搜索

categories:
- acm_水

---

L只有5,暴力搜索

## [GT and set](http://acm.hdu.edu.cn/showproblem.php?pid=5506)

Time Limit: 2000/1000 MS (Java/Others)    Memory Limit: 65536/65536 K (Java/Others)
Total Submission(s): 168    Accepted Submission(s): 50


##### Problem Description
You are given N sets.The i−th set has Ai numbers.

You should divide the sets into L parts.

And each part should have at least one number in common.

If there is at least one solution,print YES,otherwise print NO.
 

##### Input
In the first line there is the testcase T (T≤20)

For each teatcase:

In the first line there are two numbers N and L.

In the next N lines,each line describe a set.

The first number is Ai,and then there are Ai distict numbers stand for the elements int the set.

The numbers in the set are all positive numbers and they're all not bigger than 300.

1≤N≤30，1≤L≤5，1≤Ai≤10，1≤L≤N

You'd better print the enter in the last line when you hack others.

You'd better not print space in the last of each line when you hack others.
 

##### Output
For each test print YES or NO

```cpp
Sample Input
2
2 1
1 1
1 2
3 2
3 1 2 3
3 4 5 6
3 2 5 6


Sample Output
NO
YES
```

##### Hint
For the second test,there are three sets:{1,2,3},{4,5,6},{2,5,6}
You are asked to divide into two parts.
One possible solution is to put the second and the third sets into the same part,and put the first in the other part.
The second part and the third part have same number 6.
Another solution is to put the first and the third sets into the same part,and put the second in the other part.



##### Source
BestCoder Round #60
<!-- more -->

```cpp
/* ***********************************************
Author        :CKboss
Created Time  :2015年10月20日 星期二 09时13分51秒
File Name     :HDOJ5506.cpp
************************************************ */

#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
#include <string>
#include <cmath>
#include <cstdlib>
#include <vector>
#include <queue>
#include <set>
#include <map>
#include <bitset>

using namespace std;

int n,l;
int bn[40];
vector<int> vb[40];
bitset<333> bits[40];

bool isOK;
bitset<40> used;
bitset<333> vised;

/// dfs 已经分了多少段 , 这一段用的数字
void dfs(int now,int level)
{
    if(isOK) return ;
    if(used.count()==n)
    {
        isOK=true; return ;
    }
    if(level>=l) return ;

    for(int i=0;i<bn[now];i++)
    {
        int x=vb[now][i];

        if(vised[x]==true) continue;

        vised[x]=true;
        used[now]=true;

        /// 选定x,所有含有x的集合并且没有用过的都给标记掉
        vector<int> vii;

        for(int j=0;j<n;j++)
        {
            if(used[j]==0)
            {
                if(bits[j][x]==1)
                {
                    used[j]=true;
                    vii.push_back(j);
                }
            }
        }

        if(used.count()==n) { isOK=true; return ; }
        if(isOK==true) return ;

        for(int j=0;j<n&&isOK==false;j++)
        {
            if(used[j]==0)
            {
                dfs(j,level+1);
                break;
            }
        }

        /// 取消选定x,所有含有x的集合都給标记回来
        for(int j=0,sz=vii.size();j<sz;j++)
        {
            used[vii[j]]=false;
        }

        vised[x]=false;
        used[now]=false;
    }
}

void CLEAN()
{
    isOK=false;
    used.reset();
    vised.reset();
}

int main()
{
    //freopen("in.txt","r",stdin);
    //freopen("out.txt","w",stdout);

    int T_T;
    scanf("%d",&T_T);
    while(T_T--)
    {
        scanf("%d%d",&n,&l);
        for(int i=0;i<n;i++)
        {
            bits[i].reset();
            vb[i].clear();
            scanf("%d",bn+i);
            for(int j=0,x;j<bn[i];j++)
            {
                scanf("%d",&x);
                bits[i].set(x);
                vb[i].push_back(x);
            }
        }

        CLEAN();
        dfs(0,0);

        if(isOK==true) puts("YES");
        else puts("NO");
    }

    return 0;
}
```

