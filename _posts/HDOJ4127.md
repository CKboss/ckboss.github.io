title: HDOJ 4127 Flood-it! IDA*

date: 2015-11-06 14:11:06

tags:
- IDA*

categories:
- acm_搜索

---


**IDA*搜索**
H()函数可以用剩下的颜色个数来表示,每次枚举需要选择的颜色即可.


<td align="center"><h1 style="color:#1A5CC8">Flood-it!</h1><font><b><span style="font-family:Arial;font-size:12px;font-weight:bold;color:green">Time Limit: 2000/1000 MS (Java/Others)&nbsp;&nbsp;&nbsp;&nbsp;Memory Limit: 32768/32768 K (Java/Others)<br>Total Submission(s): 1672&nbsp;&nbsp;&nbsp;&nbsp;Accepted Submission(s): 387<br></span></b></font><br><br><div class="panel_title" align="left">Problem Description</div> <div class="panel_content">Flood-it is a fascinating puzzle game on Google+ platform. The game interface is like follows:<br><center><img style="max-width:100%;" src="http://acm.hdu.edu.cn/data/images/4127-1.jpg"></center> <br>At the beginning of the game, system will randomly generate an N×N square board and each grid of the board is painted by one of the six colors. The player starts from the top left corner. At each step, he/she selects a color and changes all the grids connected with the top left corner to that specific color. The statement “two grids are connected” means that there is a path between the certain two grids under condition that each pair of adjacent grids on this path is in the same color and shares an edge. In this way the player can flood areas of the board from the starting grid (top left corner) until all of the grids are in same color. The following figure shows the earliest steps of a 4×4 game (colors are labeled in 0 to 5):<br><center><img style="max-width:100%;" src="http://acm.hdu.edu.cn/data/images/4127-2.jpg"></center> <br>Given a colored board at very beginning, please find the minimal number of steps to win the game (to change all the grids into a same color). <br><br></div><div class="panel_bottom">&nbsp;</div><br><div class="panel_title" align="left">Input</div> <div class="panel_content">The input contains no more than 20 test cases. For each test case, the first line contains a single integer N (2&lt;=N&lt;=8) indicating the size of game board.<br><br>The following N lines show an N×N matrix (a<sub>i,j</sub>)<sub>n×n</sub> representing the game board. a<sub>i,j</sub> is in the range of 0 to 5 representing the color of the corresponding grid. <br>The input ends with N = 0.<br></div><div class="panel_bottom">&nbsp;</div><br><div class="panel_title" align="left">Output</div> <div class="panel_content">For each test case, output a single integer representing the minimal number of steps to win the game.<br></div><div class="panel_bottom">&nbsp;</div><br><div class="panel_title" align="left">Sample Input</div><div class="panel_content"><pre><div style="font-family:Courier New,Courier,monospace;">2
0 0 
0 0
3
0 1 2
1 1 2
2 2 1
0</div></pre></div><div class="panel_bottom">&nbsp;</div><br><div class="panel_title" align="left">Sample Output</div><div class="panel_content"><pre><div style="font-family:Courier New,Courier,monospace;">0
3</div></pre></div><div class="panel_bottom">&nbsp;</div><br><div class="panel_title" align="left">Source</div> <div class="panel_content"> <a href="/search.php?field=problem&amp;key=2011+Asia+Fuzhou+Regional+Contest+&amp;source=1&amp;searchmode=source"> 2011 Asia Fuzhou Regional Contest  </a> </div> <div class="panel_bottom">&nbsp;</div><br><div class="panel_title" align="left">Recommend</div> <div class="panel_content">lcy&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;We have carefully selected several similar problems for you:&nbsp;&nbsp;<a href="/showproblem.php?pid=4123" target="_blank">4123</a>&nbsp;<a href="/showproblem.php?pid=4124" target="_blank">4124</a>&nbsp;<a href="/showproblem.php?pid=4125" target="_blank">4125</a>&nbsp;<a href="/showproblem.php?pid=4126" target="_blank">4126</a>&nbsp;<a href="/showproblem.php?pid=4128" target="_blank">4128</a>&nbsp;</div><div class="panel_bottom">&nbsp;</div><br><center style="font-size:15px;font-family:Arial;font-weight:bold;color:#1A5CC8"><a href="statistic.php?pid=4127">Statistic</a>&nbsp;|&nbsp;<a href="submit.php?pid=4127">Submit</a>&nbsp;|&nbsp;<a href="./discuss/problem/list.php?problemid=4127">Discuss</a> | <a href="note/note.php?pid=4127">Note</a><br></center></td></tr>

<!--more-->

```cpp
/* ***********************************************
Author        :CKboss
Created Time  :2015年11月06日 星期五 09时57分59秒
File Name     :HDOJ4127.cpp
************************************************ */

#include <iostream>
#include <cstdio>
#include <cstring>
#include <algorithm>
#include <string>
#include <cmath>
#include <cstdlib>
#include <vector>
#include <queue>
#include <set>
#include <map>

using namespace std;

int n;
int a[10][10];
bool vis[10][10];
int deep;

int H()
{
    bool color[10];
    int ret=0;
    memset(color,false,sizeof(color));
    for(int i=0;i<n;i++)
    {
        for(int j=0;j<n;j++)
        {
            if(vis[i][j]==true)
            {
                if(color[a[i][j]]==false)
                {
                    color[a[i][j]]=true;
                    ret++;
                }
            }
        }
    }
    return ret;
}

const int dir_x[4]={0,0,-1,1};
const int dir_y[4]={1,-1,0,0};

bool inSide(int x,int y)
{
    if(x>=0&&x<n&&y>=0&&y<n) return true;
    return false;
}

int dfs2(int x,int y,int c)
{
    vis[x][y]=false;
    int ret=0;
    for(int i=0;i<4;i++)
    {
        int nx=x+dir_x[i];
        int ny=y+dir_y[i];

        if(inSide(nx,ny)==false||vis[nx][ny]==false||a[nx][ny]!=c) continue;
        ret++;
        ret+=dfs2(nx,ny,c);
    }
    return ret;
}

int fill(int c)
{
    int cnt=0; // 被染色的格子数
    for(int i=0;i<n;i++)
    {
        for(int j=0;j<n;j++)
        {
            if(vis[i][j]==false) 
            {
                cnt+=dfs2(i,j,c);
            }
        }
    }
    return cnt;
}

bool dfs1(int d,int deep)
{
    if(d==deep) return H()==0;
    if(d+H()>deep) return false;

    bool tv[10][10];
    memcpy(tv,vis,sizeof(vis));
    for(int i=0;i<6;i++)
    {
        if(fill(i)==0) continue;
        if(dfs1(d+1,deep)==true) return true;
        memcpy(vis,tv,sizeof(vis));
    }

    return false;
}

int main()
{
    //freopen("data2.in","r",stdin);
    //freopen("out.txt","w",stdout);

    while(scanf("%d",&n)!=EOF&&n)
    {
        for(int i=0;i<n;i++)
            for(int j=0;j<n;j++)
                scanf("%d",&a[i][j]);

        memset(vis,true,sizeof(vis));
        vis[0][0]=false; deep=0;
        dfs2(0,0,a[0][0]);

        while(dfs1(0,deep)==false) deep++;


        printf("%d\n",deep);
    }
    
    return 0;
}
```
